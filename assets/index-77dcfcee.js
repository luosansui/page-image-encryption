import{c as l}from"./index-0e062450.js";import{e as d}from"./zip-4713de7c.js";import"./index-7a388a79.js";const f=({buffer:u,width:n,height:p,name:c},i)=>{const s=new Uint8ClampedArray(u),a=new Uint8ClampedArray(s.length),m=r=>3.999999999999999*r*(1-r);let t=Array.from({length:4},(r,e)=>l.PBKDF2(i,`key${e}`).toString()).map(r=>d(r,!0));for(let r=0;r<1e3;r++)t=t.map(m);for(let r=0;r<p;r++)for(let e=0;e<n;e++){const o=(r*n+e)*4;t=t.map(m),t[0]=m(t[0]),a[o]=s[o]^Math.round(t[0]*255)^Math.round(t[1]*255),t[0]=m(t[0]),a[o+1]=s[o+1]^Math.round(t[0]*255)^Math.round(t[2]*255),t[0]=m(t[0]),a[o+2]=s[o+2]^Math.round(t[0]*255)^Math.round(t[3]*255),a[o+3]=s[o+3]}return{data:{name:c,buffer:a.buffer,width:n,height:p}}},g=(u,n)=>f(u,n);export{g as decrypt,f as encrypt};
