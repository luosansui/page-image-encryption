(function(){"use strict";var W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mt(n){if(n.__esModule)return n;var y=n.default;if(typeof y=="function"){var r=function i(){if(this instanceof i){var l=[null];l.push.apply(l,arguments);var h=Function.bind.apply(y,l);return new h}return y.apply(this,arguments)};r.prototype=y.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var l=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(r,i,l.get?l:{enumerable:!0,get:function(){return n[i]}})}),r}var cr={},St={get exports(){return cr},set exports(n){cr=n}};(function(n,y){(function(r){n.exports=r()})(function(r){var i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function l(d,f){var t=d[0],e=d[1],g=d[2],v=d[3];t+=(e&g|~e&v)+f[0]-680876936|0,t=(t<<7|t>>>25)+e|0,v+=(t&e|~t&g)+f[1]-389564586|0,v=(v<<12|v>>>20)+t|0,g+=(v&t|~v&e)+f[2]+606105819|0,g=(g<<17|g>>>15)+v|0,e+=(g&v|~g&t)+f[3]-1044525330|0,e=(e<<22|e>>>10)+g|0,t+=(e&g|~e&v)+f[4]-176418897|0,t=(t<<7|t>>>25)+e|0,v+=(t&e|~t&g)+f[5]+1200080426|0,v=(v<<12|v>>>20)+t|0,g+=(v&t|~v&e)+f[6]-1473231341|0,g=(g<<17|g>>>15)+v|0,e+=(g&v|~g&t)+f[7]-45705983|0,e=(e<<22|e>>>10)+g|0,t+=(e&g|~e&v)+f[8]+1770035416|0,t=(t<<7|t>>>25)+e|0,v+=(t&e|~t&g)+f[9]-1958414417|0,v=(v<<12|v>>>20)+t|0,g+=(v&t|~v&e)+f[10]-42063|0,g=(g<<17|g>>>15)+v|0,e+=(g&v|~g&t)+f[11]-1990404162|0,e=(e<<22|e>>>10)+g|0,t+=(e&g|~e&v)+f[12]+1804603682|0,t=(t<<7|t>>>25)+e|0,v+=(t&e|~t&g)+f[13]-40341101|0,v=(v<<12|v>>>20)+t|0,g+=(v&t|~v&e)+f[14]-1502002290|0,g=(g<<17|g>>>15)+v|0,e+=(g&v|~g&t)+f[15]+1236535329|0,e=(e<<22|e>>>10)+g|0,t+=(e&v|g&~v)+f[1]-165796510|0,t=(t<<5|t>>>27)+e|0,v+=(t&g|e&~g)+f[6]-1069501632|0,v=(v<<9|v>>>23)+t|0,g+=(v&e|t&~e)+f[11]+643717713|0,g=(g<<14|g>>>18)+v|0,e+=(g&t|v&~t)+f[0]-373897302|0,e=(e<<20|e>>>12)+g|0,t+=(e&v|g&~v)+f[5]-701558691|0,t=(t<<5|t>>>27)+e|0,v+=(t&g|e&~g)+f[10]+38016083|0,v=(v<<9|v>>>23)+t|0,g+=(v&e|t&~e)+f[15]-660478335|0,g=(g<<14|g>>>18)+v|0,e+=(g&t|v&~t)+f[4]-405537848|0,e=(e<<20|e>>>12)+g|0,t+=(e&v|g&~v)+f[9]+568446438|0,t=(t<<5|t>>>27)+e|0,v+=(t&g|e&~g)+f[14]-1019803690|0,v=(v<<9|v>>>23)+t|0,g+=(v&e|t&~e)+f[3]-187363961|0,g=(g<<14|g>>>18)+v|0,e+=(g&t|v&~t)+f[8]+1163531501|0,e=(e<<20|e>>>12)+g|0,t+=(e&v|g&~v)+f[13]-1444681467|0,t=(t<<5|t>>>27)+e|0,v+=(t&g|e&~g)+f[2]-51403784|0,v=(v<<9|v>>>23)+t|0,g+=(v&e|t&~e)+f[7]+1735328473|0,g=(g<<14|g>>>18)+v|0,e+=(g&t|v&~t)+f[12]-1926607734|0,e=(e<<20|e>>>12)+g|0,t+=(e^g^v)+f[5]-378558|0,t=(t<<4|t>>>28)+e|0,v+=(t^e^g)+f[8]-2022574463|0,v=(v<<11|v>>>21)+t|0,g+=(v^t^e)+f[11]+1839030562|0,g=(g<<16|g>>>16)+v|0,e+=(g^v^t)+f[14]-35309556|0,e=(e<<23|e>>>9)+g|0,t+=(e^g^v)+f[1]-1530992060|0,t=(t<<4|t>>>28)+e|0,v+=(t^e^g)+f[4]+1272893353|0,v=(v<<11|v>>>21)+t|0,g+=(v^t^e)+f[7]-155497632|0,g=(g<<16|g>>>16)+v|0,e+=(g^v^t)+f[10]-1094730640|0,e=(e<<23|e>>>9)+g|0,t+=(e^g^v)+f[13]+681279174|0,t=(t<<4|t>>>28)+e|0,v+=(t^e^g)+f[0]-358537222|0,v=(v<<11|v>>>21)+t|0,g+=(v^t^e)+f[3]-722521979|0,g=(g<<16|g>>>16)+v|0,e+=(g^v^t)+f[6]+76029189|0,e=(e<<23|e>>>9)+g|0,t+=(e^g^v)+f[9]-640364487|0,t=(t<<4|t>>>28)+e|0,v+=(t^e^g)+f[12]-421815835|0,v=(v<<11|v>>>21)+t|0,g+=(v^t^e)+f[15]+530742520|0,g=(g<<16|g>>>16)+v|0,e+=(g^v^t)+f[2]-995338651|0,e=(e<<23|e>>>9)+g|0,t+=(g^(e|~v))+f[0]-198630844|0,t=(t<<6|t>>>26)+e|0,v+=(e^(t|~g))+f[7]+1126891415|0,v=(v<<10|v>>>22)+t|0,g+=(t^(v|~e))+f[14]-1416354905|0,g=(g<<15|g>>>17)+v|0,e+=(v^(g|~t))+f[5]-57434055|0,e=(e<<21|e>>>11)+g|0,t+=(g^(e|~v))+f[12]+1700485571|0,t=(t<<6|t>>>26)+e|0,v+=(e^(t|~g))+f[3]-1894986606|0,v=(v<<10|v>>>22)+t|0,g+=(t^(v|~e))+f[10]-1051523|0,g=(g<<15|g>>>17)+v|0,e+=(v^(g|~t))+f[1]-2054922799|0,e=(e<<21|e>>>11)+g|0,t+=(g^(e|~v))+f[8]+1873313359|0,t=(t<<6|t>>>26)+e|0,v+=(e^(t|~g))+f[15]-30611744|0,v=(v<<10|v>>>22)+t|0,g+=(t^(v|~e))+f[6]-1560198380|0,g=(g<<15|g>>>17)+v|0,e+=(v^(g|~t))+f[13]+1309151649|0,e=(e<<21|e>>>11)+g|0,t+=(g^(e|~v))+f[4]-145523070|0,t=(t<<6|t>>>26)+e|0,v+=(e^(t|~g))+f[11]-1120210379|0,v=(v<<10|v>>>22)+t|0,g+=(t^(v|~e))+f[2]+718787259|0,g=(g<<15|g>>>17)+v|0,e+=(v^(g|~t))+f[9]-343485551|0,e=(e<<21|e>>>11)+g|0,d[0]=t+d[0]|0,d[1]=e+d[1]|0,d[2]=g+d[2]|0,d[3]=v+d[3]|0}function h(d){var f=[],t;for(t=0;t<64;t+=4)f[t>>2]=d.charCodeAt(t)+(d.charCodeAt(t+1)<<8)+(d.charCodeAt(t+2)<<16)+(d.charCodeAt(t+3)<<24);return f}function A(d){var f=[],t;for(t=0;t<64;t+=4)f[t>>2]=d[t]+(d[t+1]<<8)+(d[t+2]<<16)+(d[t+3]<<24);return f}function c(d){var f=d.length,t=[1732584193,-271733879,-1732584194,271733878],e,g,v,E,w,Q;for(e=64;e<=f;e+=64)l(t,h(d.substring(e-64,e)));for(d=d.substring(e-64),g=d.length,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<g;e+=1)v[e>>2]|=d.charCodeAt(e)<<(e%4<<3);if(v[e>>2]|=128<<(e%4<<3),e>55)for(l(t,v),e=0;e<16;e+=1)v[e]=0;return E=f*8,E=E.toString(16).match(/(.*?)(.{0,8})$/),w=parseInt(E[2],16),Q=parseInt(E[1],16)||0,v[14]=w,v[15]=Q,l(t,v),t}function x(d){var f=d.length,t=[1732584193,-271733879,-1732584194,271733878],e,g,v,E,w,Q;for(e=64;e<=f;e+=64)l(t,A(d.subarray(e-64,e)));for(d=e-64<f?d.subarray(e-64):new Uint8Array(0),g=d.length,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<g;e+=1)v[e>>2]|=d[e]<<(e%4<<3);if(v[e>>2]|=128<<(e%4<<3),e>55)for(l(t,v),e=0;e<16;e+=1)v[e]=0;return E=f*8,E=E.toString(16).match(/(.*?)(.{0,8})$/),w=parseInt(E[2],16),Q=parseInt(E[1],16)||0,v[14]=w,v[15]=Q,l(t,v),t}function a(d){var f="",t;for(t=0;t<4;t+=1)f+=i[d>>t*8+4&15]+i[d>>t*8&15];return f}function o(d){var f;for(f=0;f<d.length;f+=1)d[f]=a(d[f]);return d.join("")}o(c("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function d(f,t){return f=f|0||0,f<0?Math.max(f+t,0):Math.min(f,t)}ArrayBuffer.prototype.slice=function(f,t){var e=this.byteLength,g=d(f,e),v=e,E,w,Q,B;return t!==r&&(v=d(t,e)),g>v?new ArrayBuffer(0):(E=v-g,w=new ArrayBuffer(E),Q=new Uint8Array(w),B=new Uint8Array(this,g,E),Q.set(B),w)}}();function u(d){return/[\u0080-\uFFFF]/.test(d)&&(d=unescape(encodeURIComponent(d))),d}function s(d,f){var t=d.length,e=new ArrayBuffer(t),g=new Uint8Array(e),v;for(v=0;v<t;v+=1)g[v]=d.charCodeAt(v);return f?g:e}function m(d){return String.fromCharCode.apply(null,new Uint8Array(d))}function p(d,f,t){var e=new Uint8Array(d.byteLength+f.byteLength);return e.set(new Uint8Array(d)),e.set(new Uint8Array(f),d.byteLength),t?e:e.buffer}function _(d){var f=[],t=d.length,e;for(e=0;e<t-1;e+=2)f.push(parseInt(d.substr(e,2),16));return String.fromCharCode.apply(String,f)}function b(){this.reset()}return b.prototype.append=function(d){return this.appendBinary(u(d)),this},b.prototype.appendBinary=function(d){this._buff+=d,this._length+=d.length;var f=this._buff.length,t;for(t=64;t<=f;t+=64)l(this._hash,h(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},b.prototype.end=function(d){var f=this._buff,t=f.length,e,g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v;for(e=0;e<t;e+=1)g[e>>2]|=f.charCodeAt(e)<<(e%4<<3);return this._finish(g,t),v=o(this._hash),d&&(v=_(v)),this.reset(),v},b.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},b.prototype.setState=function(d){return this._buff=d.buff,this._length=d.length,this._hash=d.hash,this},b.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},b.prototype._finish=function(d,f){var t=f,e,g,v;if(d[t>>2]|=128<<(t%4<<3),t>55)for(l(this._hash,d),t=0;t<16;t+=1)d[t]=0;e=this._length*8,e=e.toString(16).match(/(.*?)(.{0,8})$/),g=parseInt(e[2],16),v=parseInt(e[1],16)||0,d[14]=g,d[15]=v,l(this._hash,d)},b.hash=function(d,f){return b.hashBinary(u(d),f)},b.hashBinary=function(d,f){var t=c(d),e=o(t);return f?_(e):e},b.ArrayBuffer=function(){this.reset()},b.ArrayBuffer.prototype.append=function(d){var f=p(this._buff.buffer,d,!0),t=f.length,e;for(this._length+=d.byteLength,e=64;e<=t;e+=64)l(this._hash,A(f.subarray(e-64,e)));return this._buff=e-64<t?new Uint8Array(f.buffer.slice(e-64)):new Uint8Array(0),this},b.ArrayBuffer.prototype.end=function(d){var f=this._buff,t=f.length,e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g,v;for(g=0;g<t;g+=1)e[g>>2]|=f[g]<<(g%4<<3);return this._finish(e,t),v=o(this._hash),d&&(v=_(v)),this.reset(),v},b.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.ArrayBuffer.prototype.getState=function(){var d=b.prototype.getState.call(this);return d.buff=m(d.buff),d},b.ArrayBuffer.prototype.setState=function(d){return d.buff=s(d.buff,!0),b.prototype.setState.call(this,d)},b.ArrayBuffer.prototype.destroy=b.prototype.destroy,b.ArrayBuffer.prototype._finish=b.prototype._finish,b.ArrayBuffer.hash=function(d,f){var t=x(new Uint8Array(d)),e=o(t);return f?_(e):e},b})})(St);var ur=cr;const a0=(n,y=!1,r=!1,i=13)=>{const l=i>13?13:i,A=(r?ur.hash(n):n).slice(0,l),c=parseInt(A,16);return y?c/parseInt("f".repeat(l),16):c},Dt=(n,y)=>{const r=n.split(".");if(r.length<2)return n;const i=r.slice(0,-1).join(".");let l;switch(y){case"image/png":l="png";break;case"image/jpeg":l="jpg";break;case"image/bmp":l="bmp";break;case"image/webp":l="webp";break;default:l=r[r.length-1]}return`${i}.${l}`};function h0(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hr={},Ht={get exports(){return hr},set exports(n){hr=n}};/*!

	pica
	https://github.com/nodeca/pica

	*/(function(n,y){(function(r){n.exports=r()})(function(){return function(){function r(i,l,h){function A(a,o){if(!l[a]){if(!i[a]){var u=typeof h0=="function"&&h0;if(!o&&u)return u(a,!0);if(c)return c(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var m=l[a]={exports:{}};i[a][0].call(m.exports,function(p){var _=i[a][1][p];return A(_||p)},m,m.exports,r,i,l,h)}return l[a].exports}for(var c=typeof h0=="function"&&h0,x=0;x<h.length;x++)A(h[x]);return A}return r}()({1:[function(r,i,l){var h=r("multimath"),A=r("./mm_unsharp_mask"),c=r("./mm_resize");function x(a){var o=a||[],u={js:o.indexOf("js")>=0,wasm:o.indexOf("wasm")>=0};h.call(this,u),this.features={js:u.js,wasm:u.wasm&&this.has_wasm()},this.use(A),this.use(c)}x.prototype=Object.create(h.prototype),x.prototype.constructor=x,x.prototype.resizeAndUnsharp=function(o,u){var s=this.resize(o,u);return o.unsharpAmount&&this.unsharp_mask(s,o.toWidth,o.toHeight,o.unsharpAmount,o.unsharpRadius,o.unsharpThreshold),s},i.exports=x},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(r,i,l){function h(u){return u<0?0:u>255?255:u}function A(u){return u>=0?u:0}function c(u,s,m,p,_,b){var d,f,t,e,g,v,E,w,Q,B,C,D=0,M=0;for(Q=0;Q<p;Q++){for(g=0,B=0;B<_;B++){for(v=b[g++],E=b[g++],w=D+v*4|0,d=f=t=e=0;E>0;E--)C=b[g++],e=e+C*u[w+3]|0,t=t+C*u[w+2]|0,f=f+C*u[w+1]|0,d=d+C*u[w]|0,w=w+4|0;s[M+3]=A(e>>7),s[M+2]=A(t>>7),s[M+1]=A(f>>7),s[M]=A(d>>7),M=M+p*4|0}M=(Q+1)*4|0,D=(Q+1)*m*4|0}}function x(u,s,m,p,_,b){var d,f,t,e,g,v,E,w,Q,B,C,D=0,M=0;for(Q=0;Q<p;Q++){for(g=0,B=0;B<_;B++){for(v=b[g++],E=b[g++],w=D+v*4|0,d=f=t=e=0;E>0;E--)C=b[g++],e=e+C*u[w+3]|0,t=t+C*u[w+2]|0,f=f+C*u[w+1]|0,d=d+C*u[w]|0,w=w+4|0;d>>=7,f>>=7,t>>=7,e>>=7,s[M+3]=h(e+(1<<13)>>14),s[M+2]=h(t+(1<<13)>>14),s[M+1]=h(f+(1<<13)>>14),s[M]=h(d+(1<<13)>>14),M=M+p*4|0}M=(Q+1)*4|0,D=(Q+1)*m*4|0}}function a(u,s,m,p,_,b){var d,f,t,e,g,v,E,w,Q,B,C,D,M=0,G=0;for(B=0;B<p;B++){for(v=0,C=0;C<_;C++){for(E=b[v++],w=b[v++],Q=M+E*4|0,d=f=t=e=0;w>0;w--)D=b[v++],g=u[Q+3],e=e+D*g|0,t=t+D*u[Q+2]*g|0,f=f+D*u[Q+1]*g|0,d=d+D*u[Q]*g|0,Q=Q+4|0;t=t/255|0,f=f/255|0,d=d/255|0,s[G+3]=A(e>>7),s[G+2]=A(t>>7),s[G+1]=A(f>>7),s[G]=A(d>>7),G=G+p*4|0}G=(B+1)*4|0,M=(B+1)*m*4|0}}function o(u,s,m,p,_,b){var d,f,t,e,g,v,E,w,Q,B,C,D=0,M=0;for(Q=0;Q<p;Q++){for(g=0,B=0;B<_;B++){for(v=b[g++],E=b[g++],w=D+v*4|0,d=f=t=e=0;E>0;E--)C=b[g++],e=e+C*u[w+3]|0,t=t+C*u[w+2]|0,f=f+C*u[w+1]|0,d=d+C*u[w]|0,w=w+4|0;d>>=7,f>>=7,t>>=7,e>>=7,e=h(e+(1<<13)>>14),e>0&&(d=d*255/e|0,f=f*255/e|0,t=t*255/e|0),s[M+3]=e,s[M+2]=h(t+(1<<13)>>14),s[M+1]=h(f+(1<<13)>>14),s[M]=h(d+(1<<13)>>14),M=M+p*4|0}M=(Q+1)*4|0,D=(Q+1)*m*4|0}}i.exports={convolveHor:c,convolveVert:x,convolveHorWithPre:a,convolveVertWithPre:o}},{}],3:[function(r,i,l){i.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEYA2AGf39/f39/AGAAAGAIf39/f39/f38AAg8BA2VudgZtZW1vcnkCAAADBwYBAAAAAAIGBgF/AEEACweUAQgRX193YXNtX2NhbGxfY3RvcnMAAAtjb252b2x2ZUhvcgABDGNvbnZvbHZlVmVydAACEmNvbnZvbHZlSG9yV2l0aFByZQADE2NvbnZvbHZlVmVydFdpdGhQcmUABApjb252b2x2ZUhWAAUMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAKyA4GAwABC4wDARB/AkAgA0UNACAERQ0AIANBAnQhFQNAQQAhE0EAIQsDQCALQQJqIQcCfyALQQF0IAVqIgYuAQIiC0UEQEEAIQhBACEGQQAhCUEAIQogBwwBCyASIAYuAQBqIQhBACEJQQAhCiALIRRBACEOIAchBkEAIQ8DQCAFIAZBAXRqLgEAIhAgACAIQQJ0aigCACIRQRh2bCAPaiEPIBFB/wFxIBBsIAlqIQkgEUEQdkH/AXEgEGwgDmohDiARQQh2Qf8BcSAQbCAKaiEKIAhBAWohCCAGQQFqIQYgFEEBayIUDQALIAlBB3UhCCAKQQd1IQYgDkEHdSEJIA9BB3UhCiAHIAtqCyELIAEgDEEBdCIHaiAIQQAgCEEAShs7AQAgASAHQQJyaiAGQQAgBkEAShs7AQAgASAHQQRyaiAJQQAgCUEAShs7AQAgASAHQQZyaiAKQQAgCkEAShs7AQAgDCAVaiEMIBNBAWoiEyAERw0ACyANQQFqIg0gAmwhEiANQQJ0IQwgAyANRw0ACwsL2gMBD38CQCADRQ0AIARFDQAgAkECdCEUA0AgCyEMQQAhE0EAIQIDQCACQQJqIQYCfyACQQF0IAVqIgcuAQIiAkUEQEEAIQhBACEHQQAhCkEAIQkgBgwBCyAHLgEAQQJ0IBJqIQhBACEJIAIhCkEAIQ0gBiEHQQAhDkEAIQ8DQCAFIAdBAXRqLgEAIhAgACAIQQF0IhFqLwEAbCAJaiEJIAAgEUEGcmovAQAgEGwgDmohDiAAIBFBBHJqLwEAIBBsIA9qIQ8gACARQQJyai8BACAQbCANaiENIAhBBGohCCAHQQFqIQcgCkEBayIKDQALIAlBB3UhCCANQQd1IQcgDkEHdSEKIA9BB3UhCSACIAZqCyECIAEgDEECdGogB0GAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQQh0QYD+A3EgCUGAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQRB0QYCA/AdxIApBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG3I2AgAgAyAMaiEMIBNBAWoiEyAERw0ACyAUIAtBAWoiC2whEiADIAtHDQALCwuSAwEQfwJAIANFDQAgBEUNACADQQJ0IRUDQEEAIRNBACEGA0AgBkECaiEIAn8gBkEBdCAFaiIGLgECIgdFBEBBACEJQQAhDEEAIQ1BACEOIAgMAQsgEiAGLgEAaiEJQQAhDkEAIQ1BACEMIAchFEEAIQ8gCCEGA0AgBSAGQQF0ai4BACAAIAlBAnRqKAIAIhBBGHZsIhEgD2ohDyARIBBBEHZB/wFxbCAMaiEMIBEgEEEIdkH/AXFsIA1qIQ0gESAQQf8BcWwgDmohDiAJQQFqIQkgBkEBaiEGIBRBAWsiFA0ACyAPQQd1IQkgByAIagshBiABIApBAXQiCGogDkH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEECcmogDUH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEEcmogDEH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEGcmogCUEAIAlBAEobOwEAIAogFWohCiATQQFqIhMgBEcNAAsgC0EBaiILIAJsIRIgC0ECdCEKIAMgC0cNAAsLC4IEAQ9/AkAgA0UNACAERQ0AIAJBAnQhFANAIAshDEEAIRJBACEHA0AgB0ECaiEKAn8gB0EBdCAFaiICLgECIhNFBEBBACEIQQAhCUEAIQYgCiEHQQAMAQsgAi4BAEECdCARaiEJQQAhByATIQJBACENIAohBkEAIQ5BACEPA0AgBSAGQQF0ai4BACIIIAAgCUEBdCIQai8BAGwgB2ohByAAIBBBBnJqLwEAIAhsIA5qIQ4gACAQQQRyai8BACAIbCAPaiEPIAAgEEECcmovAQAgCGwgDWohDSAJQQRqIQkgBkEBaiEGIAJBAWsiAg0ACyAHQQd1IQggDUEHdSEJIA9BB3UhBiAKIBNqIQcgDkEHdQtBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKGyIKQf8BcQRAIAlB/wFsIAJtIQkgCEH/AWwgAm0hCCAGQf8BbCACbSEGCyABIAxBAnRqIAlBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EIdEGA/gNxIAZBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EQdEGAgPwHcSAKQRh0ciAIQYBAa0EOdSICQf8BIAJB/wFIGyICQQAgAkEAShtycjYCACADIAxqIQwgEkEBaiISIARHDQALIBQgC0EBaiILbCERIAMgC0cNAAsLC0AAIAcEQEEAIAIgAyAEIAUgABADIAJBACAEIAUgBiABEAQPC0EAIAIgAyAEIAUgABABIAJBACAEIAUgBiABEAIL"},{}],4:[function(r,i,l){i.exports={name:"resize",fn:r("./resize"),wasm_fn:r("./resize_wasm"),wasm_src:r("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(r,i,l){var h=r("./resize_filter_gen"),A=r("./convolve"),c=A.convolveHor,x=A.convolveVert,a=A.convolveHorWithPre,o=A.convolveVertWithPre;function u(m,p,_){for(var b=3,d=p*_*4|0;b<d;){if(m[b]!==255)return!0;b=b+4|0}return!1}function s(m,p,_){for(var b=3,d=p*_*4|0;b<d;)m[b]=255,b=b+4|0}i.exports=function(p){var _=p.src,b=p.width,d=p.height,f=p.toWidth,t=p.toHeight,e=p.scaleX||p.toWidth/p.width,g=p.scaleY||p.toHeight/p.height,v=p.offsetX||0,E=p.offsetY||0,w=p.dest||new Uint8Array(f*t*4),Q=typeof p.filter>"u"?"mks2013":p.filter,B=h(Q,b,f,e,v),C=h(Q,d,t,g,E),D=new Uint16Array(f*d*4);return u(_,b,d)?(a(_,D,b,d,f,B),o(D,w,d,f,t,C)):(c(_,D,b,d,f,B),x(D,w,d,f,t,C),s(w,f,t)),w}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(r,i,l){var h=r("./resize_filter_info"),A=14;function c(x){return Math.round(x*((1<<A)-1))}i.exports=function(a,o,u,s,m){var p=h.filter[a].fn,_=1/s,b=Math.min(1,s),d=h.filter[a].win/b,f,t,e,g,v,E,w,Q,B,C,D,M,G,z,I,P,k,T=Math.floor((d+1)*2),U=new Int16Array((T+2)*u),R=0,S=!U.subarray||!U.set;for(f=0;f<u;f++){for(t=(f+.5)*_+m,e=Math.max(0,Math.floor(t-d)),g=Math.min(o-1,Math.ceil(t+d)),v=g-e+1,E=new Float32Array(v),w=new Int16Array(v),Q=0,B=e,C=0;B<=g;B++,C++)D=p((B+.5-t)*b),Q+=D,E[C]=D;for(M=0,C=0;C<E.length;C++)G=E[C]/Q,M+=G,w[C]=c(G);for(w[u>>1]+=c(1-M),z=0;z<w.length&&w[z]===0;)z++;if(z<w.length){for(I=w.length-1;I>0&&w[I]===0;)I--;if(P=e+z,k=I-z+1,U[R++]=P,U[R++]=k,!S)U.set(w.subarray(z,I+1),R),R+=k;else for(C=z;C<=I;C++)U[R++]=w[C]}else U[R++]=0,U[R++]=0}return U}},{"./resize_filter_info":7}],7:[function(r,i,l){var h={box:{win:.5,fn:function(c){return c<0&&(c=-c),c<.5?1:0}},hamming:{win:1,fn:function(c){if(c<0&&(c=-c),c>=1)return 0;if(c<11920929e-14)return 1;var x=c*Math.PI;return Math.sin(x)/x*(.54+.46*Math.cos(x/1))}},lanczos2:{win:2,fn:function(c){if(c<0&&(c=-c),c>=2)return 0;if(c<11920929e-14)return 1;var x=c*Math.PI;return Math.sin(x)/x*Math.sin(x/2)/(x/2)}},lanczos3:{win:3,fn:function(c){if(c<0&&(c=-c),c>=3)return 0;if(c<11920929e-14)return 1;var x=c*Math.PI;return Math.sin(x)/x*Math.sin(x/3)/(x/3)}},mks2013:{win:2.5,fn:function(c){return c<0&&(c=-c),c>=2.5?0:c>=1.5?-.125*(c-2.5)*(c-2.5):c>=.5?.25*(4*c*c-11*c+7):1.0625-1.75*c*c}}};i.exports={filter:h,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(r,i,l){var h=r("./resize_filter_gen");function A(u,s,m){for(var p=3,_=s*m*4|0;p<_;){if(u[p]!==255)return!0;p=p+4|0}return!1}function c(u,s,m){for(var p=3,_=s*m*4|0;p<_;)u[p]=255,p=p+4|0}function x(u){return new Uint8Array(u.buffer,0,u.byteLength)}var a=!0;try{a=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function o(u,s,m){if(a){s.set(x(u),m);return}for(var p=m,_=0;_<u.length;_++){var b=u[_];s[p++]=b&255,s[p++]=b>>8&255}}i.exports=function(s){var m=s.src,p=s.width,_=s.height,b=s.toWidth,d=s.toHeight,f=s.scaleX||s.toWidth/s.width,t=s.scaleY||s.toHeight/s.height,e=s.offsetX||0,g=s.offsetY||0,v=s.dest||new Uint8Array(b*d*4),E=typeof s.filter>"u"?"mks2013":s.filter,w=h(E,p,b,f,e),Q=h(E,_,d,t,g),B=0,C=Math.max(m.byteLength,v.byteLength),D=this.__align(B+C),M=_*b*4*2,G=this.__align(D+M),z=this.__align(G+w.byteLength),I=z+Q.byteLength,P=this.__instance("resize",I),k=new Uint8Array(this.__memory.buffer),T=new Uint32Array(this.__memory.buffer),U=new Uint32Array(m.buffer);T.set(U),o(w,k,G),o(Q,k,z);var R=P.exports.convolveHV||P.exports._convolveHV;A(m,p,_)?R(G,z,D,p,_,b,d,1):(R(G,z,D,p,_,b,d,0),c(v,b,d));var S=new Uint32Array(v.buffer);return S.set(new Uint32Array(this.__memory.buffer,0,d*b)),v}},{"./resize_filter_gen":6}],9:[function(r,i,l){i.exports={name:"unsharp_mask",fn:r("./unsharp_mask"),wasm_fn:r("./unsharp_mask_wasm"),wasm_src:r("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(r,i,l){var h=r("glur/mono16");function A(c,x,a){for(var o=x*a,u=new Uint16Array(o),s,m,p,_,b=0;b<o;b++)s=c[4*b],m=c[4*b+1],p=c[4*b+2],_=s>=m&&s>=p?s:m>=p&&m>=s?m:p,u[b]=_<<8;return u}i.exports=function(x,a,o,u,s,m){var p,_,b,d,f;if(!(u===0||s<.5)){s>2&&(s=2);var t=A(x,a,o),e=new Uint16Array(t);h(e,a,o,s);for(var g=u/100*4096+.5|0,v=m<<8,E=a*o,w=0;w<E;w++)p=t[w],d=p-e[w],Math.abs(d)>=v&&(_=p+(g*d+2048>>12),_=_>65280?65280:_,_=_<0?0:_,p=p!==0?p:1,b=(_<<12)/p|0,f=w*4,x[f]=x[f]*b+2048>>12,x[f+1]=x[f+1]*b+2048>>12,x[f+2]=x[f+2]*b+2048>>12)}}},{"glur/mono16":18}],11:[function(r,i,l){i.exports=function(A,c,x,a,o,u){if(!(a===0||o<.5)){o>2&&(o=2);var s=c*x,m=s*4,p=s*2,_=s*2,b=Math.max(c,x)*4,d=8*4,f=0,t=m,e=t+p,g=e+_,v=g+_,E=v+b,w=this.__instance("unsharp_mask",m+p+_*2+b+d,{exp:Math.exp}),Q=new Uint32Array(A.buffer),B=new Uint32Array(this.__memory.buffer);B.set(Q);var C=w.exports.hsv_v16||w.exports._hsv_v16;C(f,t,c,x),C=w.exports.blurMono16||w.exports._blurMono16,C(t,e,g,v,E,c,x,o),C=w.exports.unsharp||w.exports._unsharp,C(f,f,t,e,c,x,a,u),Q.set(new Uint32Array(this.__memory.buffer,0,s))}}},{}],12:[function(r,i,l){i.exports="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"},{}],13:[function(r,i,l){var h=100;function A(c,x){this.create=c,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=x||2e3}A.prototype.acquire=function(){var c=this,x;return this.available.length!==0?x=this.available.pop():(x=this.create(),x.id=this.lastId++,x.release=function(){return c.release(x)}),this.acquired[x.id]=x,x},A.prototype.release=function(c){var x=this;delete this.acquired[c.id],c.lastUsed=Date.now(),this.available.push(c),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return x.gc()},h))},A.prototype.gc=function(){var c=this,x=Date.now();this.available=this.available.filter(function(a){return x-a.lastUsed>c.idle?(a.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return c.gc()},h):this.timeoutId=0},i.exports=A},{}],14:[function(r,i,l){var h=2;i.exports=function(c,x,a,o,u,s){var m=a/c,p=o/x,_=(2*s+h+1)/u;if(_>.5)return[[a,o]];var b=Math.ceil(Math.log(Math.min(m,p))/Math.log(_));if(b<=1)return[[a,o]];for(var d=[],f=0;f<b;f++){var t=Math.round(Math.pow(Math.pow(c,b-f-1)*Math.pow(a,f+1),1/b)),e=Math.round(Math.pow(Math.pow(x,b-f-1)*Math.pow(o,f+1),1/b));d.push([t,e])}return d}},{}],15:[function(r,i,l){var h=1e-5;function A(x){var a=Math.round(x);return Math.abs(x-a)<h?a:Math.floor(x)}function c(x){var a=Math.round(x);return Math.abs(x-a)<h?a:Math.ceil(x)}i.exports=function(a){var o=a.toWidth/a.width,u=a.toHeight/a.height,s=A(a.srcTileSize*o)-2*a.destTileBorder,m=A(a.srcTileSize*u)-2*a.destTileBorder;if(s<1||m<1)throw new Error("Internal error in pica: target tile width/height is too small.");var p,_,b,d,f,t,e=[],g;for(d=0;d<a.toHeight;d+=m)for(b=0;b<a.toWidth;b+=s)p=b-a.destTileBorder,p<0&&(p=0),f=b+s+a.destTileBorder-p,p+f>=a.toWidth&&(f=a.toWidth-p),_=d-a.destTileBorder,_<0&&(_=0),t=d+m+a.destTileBorder-_,_+t>=a.toHeight&&(t=a.toHeight-_),g={toX:p,toY:_,toWidth:f,toHeight:t,toInnerX:b,toInnerY:d,toInnerWidth:s,toInnerHeight:m,offsetX:p/o-A(p/o),offsetY:_/u-A(_/u),scaleX:o,scaleY:u,x:A(p/o),y:A(_/u),width:c(f/o),height:c(t/u)},e.push(g);return e}},{}],16:[function(r,i,l){function h(A){return Object.prototype.toString.call(A)}i.exports.isCanvas=function(c){var x=h(c);return x==="[object HTMLCanvasElement]"||x==="[object OffscreenCanvas]"||x==="[object Canvas]"},i.exports.isImage=function(c){return h(c)==="[object HTMLImageElement]"},i.exports.isImageBitmap=function(c){return h(c)==="[object ImageBitmap]"},i.exports.limiter=function(c){var x=0,a=[];function o(){x<c&&a.length&&(x++,a.shift()())}return function(s){return new Promise(function(m,p){a.push(function(){s().then(function(_){m(_),x--,o()},function(_){p(_),x--,o()})}),o()})}},i.exports.cib_quality_name=function(c){switch(c){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},i.exports.cib_support=function(c){return Promise.resolve().then(function(){if(typeof createImageBitmap>"u")return!1;var x=c(100,100);return createImageBitmap(x,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(a){var o=a.width===10;return a.close(),x=null,o})}).catch(function(){return!1})},i.exports.worker_offscreen_canvas_support=function(){return new Promise(function(c,x){if(typeof OffscreenCanvas>"u"){c(!1);return}function a(s){if(typeof createImageBitmap>"u"){s.postMessage(!1);return}Promise.resolve().then(function(){var m=new OffscreenCanvas(10,10),p=m.getContext("2d");return p.rect(0,0,1,1),createImageBitmap(m,0,0,1,1)}).then(function(){return s.postMessage(!0)},function(){return s.postMessage(!1)})}var o=btoa("(".concat(a.toString(),")(self);")),u=new Worker("data:text/javascript;base64,".concat(o));u.onmessage=function(s){return c(s.data)},u.onerror=x}).then(function(c){return c},function(){return!1})},i.exports.can_use_canvas=function(c){var x=!1;try{var a=c(2,1),o=a.getContext("2d"),u=o.createImageData(2,1);u.data[0]=12,u.data[1]=23,u.data[2]=34,u.data[3]=255,u.data[4]=45,u.data[5]=56,u.data[6]=67,u.data[7]=255,o.putImageData(u,0,0),u=null,u=o.getImageData(0,0,2,1),u.data[0]===12&&u.data[1]===23&&u.data[2]===34&&u.data[3]===255&&u.data[4]===45&&u.data[5]===56&&u.data[6]===67&&u.data[7]===255&&(x=!0)}catch{}return x},i.exports.cib_can_use_region=function(){return new Promise(function(c){if(typeof Image>"u"||typeof createImageBitmap>"u"){c(!1);return}var x=new Image;x.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",x.onload=function(){createImageBitmap(x,0,0,x.width,x.height).then(function(a){a.width===x.width&&a.height===x.height?c(!0):c(!1)},function(){return c(!1)})},x.onerror=function(){return c(!1)}})}},{}],17:[function(r,i,l){i.exports=function(){var h=r("./mathlib"),A;onmessage=function(x){var a=x.data.opts;if(!a.src&&a.srcBitmap){var o=new OffscreenCanvas(a.width,a.height),u=o.getContext("2d");u.drawImage(a.srcBitmap,0,0),a.src=u.getImageData(0,0,a.width,a.height).data,o.width=o.height=0,o=null,a.srcBitmap.close(),a.srcBitmap=null}A||(A=new h(x.data.features));var s=A.resizeAndUnsharp(a);postMessage({data:s},[s.buffer])}}},{"./mathlib":1}],18:[function(r,i,l){var h,A,c,x,a,o,u,s;function m(b){b<.5&&(b=.5);var d=Math.exp(.726*.726)/b,f=Math.exp(-d),t=Math.exp(-2*d),e=(1-f)*(1-f)/(1+2*d*f-t);return h=e,A=e*(d-1)*f,c=e*(d+1)*f,x=-e*t,a=2*f,o=-t,u=(h+A)/(1-a-o),s=(c+x)/(1-a-o),new Float32Array([h,A,c,x,a,o,u,s])}function p(b,d,f,t,e,g){var v,E,w,Q,B,C,D,M,G,z,I,P,k,T;for(G=0;G<g;G++){for(C=G*e,D=G,M=0,v=b[C],B=v*t[6],Q=B,I=t[0],P=t[1],k=t[4],T=t[5],z=0;z<e;z++)E=b[C],w=E*I+v*P+Q*k+B*T,B=Q,Q=w,v=E,f[M]=Q,M++,C++;for(C--,M--,D+=g*(e-1),v=b[C],B=v*t[7],Q=B,E=v,I=t[2],P=t[3],z=e-1;z>=0;z--)w=E*I+v*P+Q*k+B*T,B=Q,Q=w,v=E,E=b[C],d[D]=f[M]+Q,C--,M--,D-=g}}function _(b,d,f,t){if(t){var e=new Uint16Array(b.length),g=new Float32Array(Math.max(d,f)),v=m(t);p(b,e,g,v,d,f),p(e,b,g,v,f,d)}}i.exports=_},{}],19:[function(r,i,l){var h=r("object-assign"),A=r("./lib/base64decode"),c=r("./lib/wa_detect"),x={js:!0,wasm:!0};function a(o){if(!(this instanceof a))return new a(o);var u=h({},x,o||{});if(this.options=u,this.__cache={},this.__init_promise=null,this.__modules=u.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}a.prototype.has_wasm=c,a.prototype.use=function(o){return this.__modules[o.name]=o,this.options.wasm&&this.has_wasm()&&o.wasm_fn?this[o.name]=o.wasm_fn:this[o.name]=o.fn,this},a.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var o=this;return this.__init_promise=Promise.all(Object.keys(o.__modules).map(function(u){var s=o.__modules[u];return!o.options.wasm||!o.has_wasm()||!s.wasm_fn||o.__wasm[u]?null:WebAssembly.compile(o.__base64decode(s.wasm_src)).then(function(m){o.__wasm[u]=m})})).then(function(){return o}),this.__init_promise},a.prototype.__base64decode=A,a.prototype.__reallocate=function(u){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(u/(64*1024))}),this.__memory;var s=this.__memory.buffer.byteLength;return s<u&&this.__memory.grow(Math.ceil((u-s)/(64*1024))),this.__memory},a.prototype.__instance=function(u,s,m){if(s&&this.__reallocate(s),!this.__wasm[u]){var p=this.__modules[u];this.__wasm[u]=new WebAssembly.Module(this.__base64decode(p.wasm_src))}if(!this.__cache[u]){var _={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[u]=new WebAssembly.Instance(this.__wasm[u],{env:h(_,m||{})})}return this.__cache[u]},a.prototype.__align=function(u,s){s=s||8;var m=u%s;return u+(m?s-m:0)},i.exports=a},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(r,i,l){var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";i.exports=function(c){for(var x=c.replace(/[\r\n=]/g,""),a=x.length,o=new Uint8Array(a*3>>2),u=0,s=0,m=0;m<a;m++)m%4===0&&m&&(o[s++]=u>>16&255,o[s++]=u>>8&255,o[s++]=u&255),u=u<<6|h.indexOf(x.charAt(m));var p=a%4*6;return p===0?(o[s++]=u>>16&255,o[s++]=u>>8&255,o[s++]=u&255):p===18?(o[s++]=u>>10&255,o[s++]=u>>2&255):p===12&&(o[s++]=u>>4&255),o}},{}],21:[function(r,i,l){var h;i.exports=function(){if(typeof h<"u"||(h=!1,typeof WebAssembly>"u"))return h;try{var c=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),x=new WebAssembly.Module(c),a=new WebAssembly.Instance(x,{});return a.exports.test(4)!==0&&(h=!0),h}catch{}return h}},{}],22:[function(r,i,l){var h=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function x(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function a(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var u={},s=0;s<10;s++)u["_"+String.fromCharCode(s)]=s;var m=Object.getOwnPropertyNames(u).map(function(_){return u[_]});if(m.join("")!=="0123456789")return!1;var p={};return"abcdefghijklmnopqrst".split("").forEach(function(_){p[_]=_}),Object.keys(Object.assign({},p)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}i.exports=a()?Object.assign:function(o,u){for(var s,m=x(o),p,_=1;_<arguments.length;_++){s=Object(arguments[_]);for(var b in s)A.call(s,b)&&(m[b]=s[b]);if(h){p=h(s);for(var d=0;d<p.length;d++)c.call(s,p[d])&&(m[p[d]]=s[p[d]])}}return m}},{}],23:[function(r,i,l){var h=arguments[3],A=arguments[4],c=arguments[5],x=JSON.stringify;i.exports=function(a,o){for(var u,s=Object.keys(c),m=0,p=s.length;m<p;m++){var _=s[m],b=c[_].exports;if(b===a||b&&b.default===a){u=_;break}}if(!u){u=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var d={},m=0,p=s.length;m<p;m++){var _=s[m];d[_]=_}A[u]=["function(require,module,exports){"+a+"(self); }",d]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),t={};t[u]=u,A[f]=["function(require,module,exports){var f = require("+x(u)+");(f.default ? f.default : f)(self);}",t];var e={};g(f);function g(C){e[C]=!0;for(var D in A[C][1]){var M=A[C][1][D];e[M]||g(M)}}var v="("+h+")({"+Object.keys(e).map(function(C){return x(C)+":["+A[C][0]+","+x(A[C][1])+"]"}).join(",")+"},{},["+x(f)+"])",E=window.URL||window.webkitURL||window.mozURL||window.msURL,w=new Blob([v],{type:"text/javascript"});if(o&&o.bare)return w;var Q=E.createObjectURL(w),B=new Worker(Q);return B.objectURL=Q,B}},{}],"/index.js":[function(r,i,l){function h(I,P){return o(I)||a(I,P)||c(I,P)||A()}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(I,P){if(I){if(typeof I=="string")return x(I,P);var k=Object.prototype.toString.call(I).slice(8,-1);if(k==="Object"&&I.constructor&&(k=I.constructor.name),k==="Map"||k==="Set")return Array.from(I);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return x(I,P)}}function x(I,P){(P==null||P>I.length)&&(P=I.length);for(var k=0,T=new Array(P);k<P;k++)T[k]=I[k];return T}function a(I,P){var k=I==null?null:typeof Symbol<"u"&&I[Symbol.iterator]||I["@@iterator"];if(k!=null){var T=[],U=!0,R=!1,S,H;try{for(k=k.call(I);!(U=(S=k.next()).done)&&(T.push(S.value),!(P&&T.length===P));U=!0);}catch(F){R=!0,H=F}finally{try{!U&&k.return!=null&&k.return()}finally{if(R)throw H}}return T}}function o(I){if(Array.isArray(I))return I}var u=r("object-assign"),s=r("webworkify"),m=r("./lib/mathlib"),p=r("./lib/pool"),_=r("./lib/utils"),b=r("./lib/worker"),d=r("./lib/stepper"),f=r("./lib/tiler"),t=r("./lib/mm_resize/resize_filter_info"),e={},g=!1;try{typeof navigator<"u"&&navigator.userAgent&&(g=navigator.userAgent.indexOf("Safari")>=0)}catch{}var v=1;typeof navigator<"u"&&(v=Math.min(navigator.hardwareConcurrency||1,4));var E={tile:1024,concurrency:v,features:["js","wasm","ww"],idle:2e3,createCanvas:function(P,k){var T=document.createElement("canvas");return T.width=P,T.height=k,T}},w={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},Q=!1,B=!1,C=!1,D=!1,M=!1;function G(){return{value:s(b),destroy:function(){if(this.value.terminate(),typeof window<"u"){var P=window.URL||window.webkitURL||window.mozURL||window.msURL;P&&P.revokeObjectURL&&this.value.objectURL&&P.revokeObjectURL(this.value.objectURL)}}}}function z(I){if(!(this instanceof z))return new z(I);this.options=u({},E,I||{});var P="lk_".concat(this.options.concurrency);this.__limit=e[P]||_.limiter(this.options.concurrency),e[P]||(e[P]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}z.prototype.init=function(){var I=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData<"u"&&typeof Uint8ClampedArray<"u")try{new ImageData(new Uint8ClampedArray(400),10,10),Q=!0}catch{}typeof ImageBitmap<"u"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?B=!0:this.debug("ImageBitmap does not support .close(), disabled"));var P=this.options.features.slice();if(P.indexOf("all")>=0&&(P=["cib","wasm","js","ww"]),this.__requested_features=P,this.__mathlib=new m(P),P.indexOf("ww")>=0&&typeof window<"u"&&"Worker"in window)try{var k=r("webworkify")(function(){});k.terminate(),this.features.ww=!0;var T="wp_".concat(JSON.stringify(this.options));e[T]?this.__workersPool=e[T]:(this.__workersPool=new p(G,this.options.idle),e[T]=this.__workersPool)}catch{}var U=this.__mathlib.init().then(function(F){u(I.features,F.features)}),R;B?R=_.cib_support(this.options.createCanvas).then(function(F){if(I.features.cib&&P.indexOf("cib")<0){I.debug("createImageBitmap() resize supported, but disabled by config");return}P.indexOf("cib")>=0&&(I.features.cib=F)}):R=Promise.resolve(!1),C=_.can_use_canvas(this.options.createCanvas);var S;B&&Q&&P.indexOf("ww")!==-1?S=_.worker_offscreen_canvas_support():S=Promise.resolve(!1),S=S.then(function(F){D=F});var H=_.cib_can_use_region().then(function(F){M=F});return this.__initPromise=Promise.all([U,R,S,H]).then(function(){return I}),this.__initPromise},z.prototype.__invokeResize=function(I,P){var k=this;return P.__mathCache=P.__mathCache||{},Promise.resolve().then(function(){return k.features.ww?new Promise(function(T,U){var R=k.__workersPool.acquire();P.cancelToken&&P.cancelToken.catch(function(H){return U(H)}),R.value.onmessage=function(H){R.release(),H.data.err?U(H.data.err):T(H.data)};var S=[];I.src&&S.push(I.src.buffer),I.srcBitmap&&S.push(I.srcBitmap),R.value.postMessage({opts:I,features:k.__requested_features,preload:{wasm_nodule:k.__mathlib.__}},S)}):{data:k.__mathlib.resizeAndUnsharp(I,P.__mathCache)}})},z.prototype.__extractTileData=function(I,P,k,T,U){if(this.features.ww&&D&&(_.isCanvas(P)||M))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(T.srcImageBitmap||P,I.x,I.y,I.width,I.height).then(function(H){return U.srcBitmap=H,U});if(_.isCanvas(P))return T.srcCtx||(T.srcCtx=P.getContext("2d")),this.debug("Get tile pixel data"),U.src=T.srcCtx.getImageData(I.x,I.y,I.width,I.height).data,U;this.debug("Draw tile imageBitmap/image to temporary canvas");var R=this.options.createCanvas(I.width,I.height),S=R.getContext("2d");return S.globalCompositeOperation="copy",S.drawImage(T.srcImageBitmap||P,I.x,I.y,I.width,I.height,0,0,I.width,I.height),this.debug("Get tile pixel data"),U.src=S.getImageData(0,0,I.width,I.height).data,R.width=R.height=0,U},z.prototype.__landTileData=function(I,P,k){var T;if(this.debug("Convert raw rgba tile result to ImageData"),P.bitmap)return k.toCtx.drawImage(P.bitmap,I.toX,I.toY),null;if(Q)T=new ImageData(new Uint8ClampedArray(P.data),I.toWidth,I.toHeight);else if(T=k.toCtx.createImageData(I.toWidth,I.toHeight),T.data.set)T.data.set(P.data);else for(var U=T.data.length-1;U>=0;U--)T.data[U]=P.data[U];return this.debug("Draw tile"),g?k.toCtx.putImageData(T,I.toX,I.toY,I.toInnerX-I.toX,I.toInnerY-I.toY,I.toInnerWidth+1e-5,I.toInnerHeight+1e-5):k.toCtx.putImageData(T,I.toX,I.toY,I.toInnerX-I.toX,I.toInnerY-I.toY,I.toInnerWidth,I.toInnerHeight),null},z.prototype.__tileAndResize=function(I,P,k){var T=this,U={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},R=function(H){return T.__limit(function(){if(k.canceled)return k.cancelToken;var F={width:H.width,height:H.height,toWidth:H.toWidth,toHeight:H.toHeight,scaleX:H.scaleX,scaleY:H.scaleY,offsetX:H.offsetX,offsetY:H.offsetY,filter:k.filter,unsharpAmount:k.unsharpAmount,unsharpRadius:k.unsharpRadius,unsharpThreshold:k.unsharpThreshold};return T.debug("Invoke resize math"),Promise.resolve(F).then(function(L){return T.__extractTileData(H,I,k,U,L)}).then(function(L){return T.debug("Invoke resize math"),T.__invokeResize(L,k)}).then(function(L){return k.canceled?k.cancelToken:(U.srcImageData=null,T.__landTileData(H,L,U))})})};return Promise.resolve().then(function(){if(U.toCtx=P.getContext("2d"),_.isCanvas(I))return null;if(_.isImageBitmap(I))return U.srcImageBitmap=I,U.isImageBitmapReused=!0,null;if(_.isImage(I))return B?(T.debug("Decode image via createImageBitmap"),createImageBitmap(I).then(function(S){U.srcImageBitmap=S}).catch(function(S){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(k.canceled)return k.cancelToken;T.debug("Calculate tiles");var S=f({width:k.width,height:k.height,srcTileSize:T.options.tile,toWidth:k.toWidth,toHeight:k.toHeight,destTileBorder:k.__destTileBorder}),H=S.map(function(L){return R(L)});function F(L){L.srcImageBitmap&&(L.isImageBitmapReused||L.srcImageBitmap.close(),L.srcImageBitmap=null)}return T.debug("Process tiles"),Promise.all(H).then(function(){return T.debug("Finished!"),F(U),P},function(L){throw F(U),L})})},z.prototype.__processStages=function(I,P,k,T){var U=this;if(T.canceled)return T.cancelToken;var R=I.shift(),S=h(R,2),H=S[0],F=S[1],L=I.length===0,O;L||t.q2f.indexOf(T.filter)<0?O=T.filter:T.filter==="box"?O="box":O="hamming",T=u({},T,{toWidth:H,toHeight:F,filter:O});var j;return L||(j=this.options.createCanvas(H,F)),this.__tileAndResize(P,L?k:j,T).then(function(){return L?k:(T.width=H,T.height=F,U.__processStages(I,j,k,T))}).then(function(q){return j&&(j.width=j.height=0),q})},z.prototype.__resizeViaCreateImageBitmap=function(I,P,k){var T=this,U=P.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(I,{resizeWidth:k.toWidth,resizeHeight:k.toHeight,resizeQuality:_.cib_quality_name(t.f2q[k.filter])}).then(function(R){if(k.canceled)return k.cancelToken;if(!k.unsharpAmount)return U.drawImage(R,0,0),R.close(),U=null,T.debug("Finished!"),P;T.debug("Unsharp result");var S=T.options.createCanvas(k.toWidth,k.toHeight),H=S.getContext("2d");H.drawImage(R,0,0),R.close();var F=H.getImageData(0,0,k.toWidth,k.toHeight);return T.__mathlib.unsharp_mask(F.data,k.toWidth,k.toHeight,k.unsharpAmount,k.unsharpRadius,k.unsharpThreshold),U.putImageData(F,0,0),S.width=S.height=0,F=H=S=U=null,T.debug("Finished!"),P})},z.prototype.resize=function(I,P,k){var T=this;this.debug("Start resize...");var U=u({},w);if(isNaN(k)?k&&(U=u(U,k)):U=u(U,{quality:k}),U.toWidth=P.width,U.toHeight=P.height,U.width=I.naturalWidth||I.width,U.height=I.naturalHeight||I.height,Object.prototype.hasOwnProperty.call(U,"quality")){if(U.quality<0||U.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(U.quality));U.filter=t.q2f[U.quality]}if(P.width===0||P.height===0)return Promise.reject(new Error("Invalid output size: ".concat(P.width,"x").concat(P.height)));U.unsharpRadius>2&&(U.unsharpRadius=2),U.canceled=!1,U.cancelToken&&(U.cancelToken=U.cancelToken.then(function(S){throw U.canceled=!0,S},function(S){throw U.canceled=!0,S}));var R=3;return U.__destTileBorder=Math.ceil(Math.max(R,2.5*U.unsharpRadius|0)),this.init().then(function(){if(U.canceled)return U.cancelToken;if(T.features.cib){if(t.q2f.indexOf(U.filter)>=0)return T.__resizeViaCreateImageBitmap(I,P,U);T.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!C){var S=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw S.code="ERR_GET_IMAGE_DATA",S}var H=d(U.width,U.height,U.toWidth,U.toHeight,T.options.tile,U.__destTileBorder);return T.__processStages(H,I,P,U)})},z.prototype.resizeBuffer=function(I){var P=this,k=u({},w,I);if(Object.prototype.hasOwnProperty.call(k,"quality")){if(k.quality<0||k.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(k.quality));k.filter=t.q2f[k.quality]}return this.init().then(function(){return P.__mathlib.resizeAndUnsharp(k)})},z.prototype.toBlob=function(I,P,k){return P=P||"image/png",new Promise(function(T){if(I.toBlob){I.toBlob(function(F){return T(F)},P,k);return}if(I.convertToBlob){T(I.convertToBlob({type:P,quality:k}));return}for(var U=atob(I.toDataURL(P,k).split(",")[1]),R=U.length,S=new Uint8Array(R),H=0;H<R;H++)S[H]=U.charCodeAt(H);T(new Blob([S],{type:P}))})},z.prototype.debug=function(){},i.exports=z},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")})})(Ht);var kt=hr;function Ft(n,y){const r=n.size,i=1024*1024*10;return r<=i?new Promise(l=>{const h=new FileReader;h.readAsArrayBuffer(n),h.onload=A=>{var a;const c=new ur.ArrayBuffer;c.append((a=A.target)==null?void 0:a.result);const x=c.end();l(x)}}):new Promise(l=>{const h=Math.ceil(r/i);let A=0,c=0;const x=new ur.ArrayBuffer,a=new FileReader;a.onload=function(u){var s;if(x.append((s=u.target)==null?void 0:s.result),c+=i,A++,A<h)o();else{const m=x.end();l(m)}if(y){const m=Math.min(c/r*100,100);y(m)}};function o(){const u=c,s=Math.min(u+i,r);a.readAsArrayBuffer(n.slice(u,s))}o()})}async function Ut(n,y=1){const r=await createImageBitmap(n),i=new OffscreenCanvas(r.width,r.height),l=i.getContext("2d");if(l.drawImage(r,0,0),y<1){const A=await i.convertToBlob({type:"image/jpeg",quality:y}),c=await createImageBitmap(A);l.clearRect(0,0,i.width,i.height),l.drawImage(c,0,0)}const h=l.getImageData(0,0,r.width,r.height).data.buffer;return{name:n.name,buffer:h,width:r.width,height:r.height}}async function Pt(n,y="image/png",r=1){const{buffer:i,width:l,height:h,name:A}=n,c=new ImageData(new Uint8ClampedArray(i),l,h),x=new OffscreenCanvas(l,h);x.getContext("2d").putImageData(c,0,0);const o=await x.convertToBlob({type:y,quality:r}),u=Dt(A,o.type);return new File([o],`encrypted-${u}`,{type:o.type})}const Tt=n=>new Promise((y,r)=>{const i=new Image;i.src=URL.createObjectURL(n),i.onload=()=>{URL.revokeObjectURL(i.src),y(i)},i.onerror=()=>{URL.revokeObjectURL(i.src),r(new Error("Failed to load image"))}}),zt=n=>{const{width:y,height:r,buffer:i,name:l}=n,h=Math.max(y,r);if(y===r)return n;if(y>r){const A=new Uint8ClampedArray(h**2*4);return A.set(new Uint8ClampedArray(i)),{name:l,width:h,height:h,buffer:A.buffer}}else{const A=new Uint8ClampedArray(h**2*4),c=y*4;for(let x=0;x<r;x++){const a=x*c;A.set(new Uint8ClampedArray(i,a,c),a+x*(h-y)*4)}return{name:l,width:h,height:h,buffer:A.buffer}}},Gt=n=>{const{width:y,height:r,buffer:i,name:l}=n;if(y!==r)return n;let h=0,A=0;for(let x=r-1;x>=0;x--){const a=y*4,o=x*a,u=new Uint8ClampedArray(i,o,a);let s=0,m=0;if(u.forEach((p,_)=>{p<30&&(_%3!==0?s++:m++)}),m*4/u.length>.55||s*4/(u.length*3)>.55)h++;else break}if(h>0){const x=r-h,a=new Uint8ClampedArray(x*y*4);return a.set(new Uint8ClampedArray(i,0,x*y*4)),{name:l,width:y,height:x,buffer:a.buffer}}for(let x=y-1;x>=0;x--){const a=new Uint8ClampedArray(r*4);for(let s=0;s<r;s++)a.set(new Uint8ClampedArray(i,s*y*4+x*4,4),s*4);let o=0,u=0;if(a.forEach((s,m)=>{s<30&&(m%3!==0?o++:u++)}),u*4/a.length>.55||o*4/(a.length*3)>.55)A++;else break}const c=new Uint8ClampedArray(r*(y-A)*4);for(let x=0;x<r;x++)c.set(new Uint8ClampedArray(i,x*y*4,(y-A)*4),x*(y-A)*4);return{name:l,width:y-A,height:r,buffer:c.buffer}},Lt=async(n,y,r,i)=>{try{const l=new kt({createCanvas:(a,o)=>new OffscreenCanvas(a,o)}),h=i?await createImageBitmap(n):await Tt(n),A=Math.min(y/h.width,r/h.height),c=new OffscreenCanvas(h.width*A,h.height*A);await l.resize(h,c);const x=await c.convertToBlob({type:"image/png"});return new File([x],n.name,{type:x.type})}catch(l){return console.error("生成缩略图失败: ",l),n}},qt=async(n,y,r=!0,i=!1,l=128,h=128)=>{const A=await Lt(n,l,h,i),c=y||await Ft(n),x=r?URL.createObjectURL(n):"",a=r?URL.createObjectURL(A):"";return{file:n,src:x,md5:c,thumbnail:{file:A,src:a}}};var r0={},Wt={get exports(){return r0},set exports(n){r0=n}},_0={},Nt={get exports(){return _0},set exports(n){_0=n}},Ot={},jt=Object.freeze({__proto__:null,default:Ot}),Xt=Mt(jt),pr;function N(){return pr||(pr=1,function(n,y){(function(r,i){n.exports=i()})(W,function(){var r=r||function(i,l){var h;if(typeof window<"u"&&window.crypto&&(h=window.crypto),typeof self<"u"&&self.crypto&&(h=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(h=globalThis.crypto),!h&&typeof window<"u"&&window.msCrypto&&(h=window.msCrypto),!h&&typeof W<"u"&&W.crypto&&(h=W.crypto),!h&&typeof h0=="function")try{h=Xt}catch{}var A=function(){if(h){if(typeof h.getRandomValues=="function")try{return h.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof h.randomBytes=="function")try{return h.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function f(){}return function(t){var e;return f.prototype=t,e=new f,f.prototype=null,e}}(),x={},a=x.lib={},o=a.Base=function(){return{extend:function(f){var t=c(this);return f&&t.mixIn(f),(!t.hasOwnProperty("init")||this.init===t.init)&&(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var f=this.extend();return f.init.apply(f,arguments),f},init:function(){},mixIn:function(f){for(var t in f)f.hasOwnProperty(t)&&(this[t]=f[t]);f.hasOwnProperty("toString")&&(this.toString=f.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=a.WordArray=o.extend({init:function(f,t){f=this.words=f||[],t!=l?this.sigBytes=t:this.sigBytes=f.length*4},toString:function(f){return(f||m).stringify(this)},concat:function(f){var t=this.words,e=f.words,g=this.sigBytes,v=f.sigBytes;if(this.clamp(),g%4)for(var E=0;E<v;E++){var w=e[E>>>2]>>>24-E%4*8&255;t[g+E>>>2]|=w<<24-(g+E)%4*8}else for(var Q=0;Q<v;Q+=4)t[g+Q>>>2]=e[Q>>>2];return this.sigBytes+=v,this},clamp:function(){var f=this.words,t=this.sigBytes;f[t>>>2]&=4294967295<<32-t%4*8,f.length=i.ceil(t/4)},clone:function(){var f=o.clone.call(this);return f.words=this.words.slice(0),f},random:function(f){for(var t=[],e=0;e<f;e+=4)t.push(A());return new u.init(t,f)}}),s=x.enc={},m=s.Hex={stringify:function(f){for(var t=f.words,e=f.sigBytes,g=[],v=0;v<e;v++){var E=t[v>>>2]>>>24-v%4*8&255;g.push((E>>>4).toString(16)),g.push((E&15).toString(16))}return g.join("")},parse:function(f){for(var t=f.length,e=[],g=0;g<t;g+=2)e[g>>>3]|=parseInt(f.substr(g,2),16)<<24-g%8*4;return new u.init(e,t/2)}},p=s.Latin1={stringify:function(f){for(var t=f.words,e=f.sigBytes,g=[],v=0;v<e;v++){var E=t[v>>>2]>>>24-v%4*8&255;g.push(String.fromCharCode(E))}return g.join("")},parse:function(f){for(var t=f.length,e=[],g=0;g<t;g++)e[g>>>2]|=(f.charCodeAt(g)&255)<<24-g%4*8;return new u.init(e,t)}},_=s.Utf8={stringify:function(f){try{return decodeURIComponent(escape(p.stringify(f)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(f){return p.parse(unescape(encodeURIComponent(f)))}},b=a.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(f){typeof f=="string"&&(f=_.parse(f)),this._data.concat(f),this._nDataBytes+=f.sigBytes},_process:function(f){var t,e=this._data,g=e.words,v=e.sigBytes,E=this.blockSize,w=E*4,Q=v/w;f?Q=i.ceil(Q):Q=i.max((Q|0)-this._minBufferSize,0);var B=Q*E,C=i.min(B*4,v);if(B){for(var D=0;D<B;D+=E)this._doProcessBlock(g,D);t=g.splice(0,B),e.sigBytes-=C}return new u.init(t,C)},clone:function(){var f=o.clone.call(this);return f._data=this._data.clone(),f},_minBufferSize:0});a.Hasher=b.extend({cfg:o.extend(),init:function(f){this.cfg=this.cfg.extend(f),this.reset()},reset:function(){b.reset.call(this),this._doReset()},update:function(f){return this._append(f),this._process(),this},finalize:function(f){f&&this._append(f);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(f){return function(t,e){return new f.init(e).finalize(t)}},_createHmacHelper:function(f){return function(t,e){return new d.HMAC.init(f,e).finalize(t)}}});var d=x.algo={};return x}(Math);return r})}(Nt)),_0}var m0={},Kt={get exports(){return m0},set exports(n){m0=n}},gr;function b0(){return gr||(gr=1,function(n,y){(function(r,i){n.exports=i(N())})(W,function(r){return function(i){var l=r,h=l.lib,A=h.Base,c=h.WordArray,x=l.x64={};x.Word=A.extend({init:function(a,o){this.high=a,this.low=o}}),x.WordArray=A.extend({init:function(a,o){a=this.words=a||[],o!=i?this.sigBytes=o:this.sigBytes=a.length*8},toX32:function(){for(var a=this.words,o=a.length,u=[],s=0;s<o;s++){var m=a[s];u.push(m.high),u.push(m.low)}return c.create(u,this.sigBytes)},clone:function(){for(var a=A.clone.call(this),o=a.words=this.words.slice(0),u=o.length,s=0;s<u;s++)o[s]=o[s].clone();return a}})}(),r})}(Kt)),m0}var y0={},Yt={get exports(){return y0},set exports(n){y0=n}},_r;function Zt(){return _r||(_r=1,function(n,y){(function(r,i){n.exports=i(N())})(W,function(r){return function(){if(typeof ArrayBuffer=="function"){var i=r,l=i.lib,h=l.WordArray,A=h.init,c=h.init=function(x){if(x instanceof ArrayBuffer&&(x=new Uint8Array(x)),(x instanceof Int8Array||typeof Uint8ClampedArray<"u"&&x instanceof Uint8ClampedArray||x instanceof Int16Array||x instanceof Uint16Array||x instanceof Int32Array||x instanceof Uint32Array||x instanceof Float32Array||x instanceof Float64Array)&&(x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength)),x instanceof Uint8Array){for(var a=x.byteLength,o=[],u=0;u<a;u++)o[u>>>2]|=x[u]<<24-u%4*8;A.call(this,o,a)}else A.apply(this,arguments)};c.prototype=h}}(),r.lib.WordArray})}(Yt)),y0}var B0={},$t={get exports(){return B0},set exports(n){B0=n}},mr;function Vt(){return mr||(mr=1,function(n,y){(function(r,i){n.exports=i(N())})(W,function(r){return function(){var i=r,l=i.lib,h=l.WordArray,A=i.enc;A.Utf16=A.Utf16BE={stringify:function(x){for(var a=x.words,o=x.sigBytes,u=[],s=0;s<o;s+=2){var m=a[s>>>2]>>>16-s%4*8&65535;u.push(String.fromCharCode(m))}return u.join("")},parse:function(x){for(var a=x.length,o=[],u=0;u<a;u++)o[u>>>1]|=x.charCodeAt(u)<<16-u%2*16;return h.create(o,a*2)}},A.Utf16LE={stringify:function(x){for(var a=x.words,o=x.sigBytes,u=[],s=0;s<o;s+=2){var m=c(a[s>>>2]>>>16-s%4*8&65535);u.push(String.fromCharCode(m))}return u.join("")},parse:function(x){for(var a=x.length,o=[],u=0;u<a;u++)o[u>>>1]|=c(x.charCodeAt(u)<<16-u%2*16);return h.create(o,a*2)}};function c(x){return x<<8&4278255360|x>>>8&16711935}}(),r.enc.Utf16})}($t)),B0}var C0={},Jt={get exports(){return C0},set exports(n){C0=n}},br;function i0(){return br||(br=1,function(n,y){(function(r,i){n.exports=i(N())})(W,function(r){return function(){var i=r,l=i.lib,h=l.WordArray,A=i.enc;A.Base64={stringify:function(x){var a=x.words,o=x.sigBytes,u=this._map;x.clamp();for(var s=[],m=0;m<o;m+=3)for(var p=a[m>>>2]>>>24-m%4*8&255,_=a[m+1>>>2]>>>24-(m+1)%4*8&255,b=a[m+2>>>2]>>>24-(m+2)%4*8&255,d=p<<16|_<<8|b,f=0;f<4&&m+f*.75<o;f++)s.push(u.charAt(d>>>6*(3-f)&63));var t=u.charAt(64);if(t)for(;s.length%4;)s.push(t);return s.join("")},parse:function(x){var a=x.length,o=this._map,u=this._reverseMap;if(!u){u=this._reverseMap=[];for(var s=0;s<o.length;s++)u[o.charCodeAt(s)]=s}var m=o.charAt(64);if(m){var p=x.indexOf(m);p!==-1&&(a=p)}return c(x,a,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function c(x,a,o){for(var u=[],s=0,m=0;m<a;m++)if(m%4){var p=o[x.charCodeAt(m-1)]<<m%4*2,_=o[x.charCodeAt(m)]>>>6-m%4*2,b=p|_;u[s>>>2]|=b<<24-s%4*8,s++}return h.create(u,s)}}(),r.enc.Base64})}(Jt)),C0}var w0={},re={get exports(){return w0},set exports(n){w0=n}},yr;function te(){return yr||(yr=1,function(n,y){(function(r,i){n.exports=i(N())})(W,function(r){return function(){var i=r,l=i.lib,h=l.WordArray,A=i.enc;A.Base64url={stringify:function(x,a=!0){var o=x.words,u=x.sigBytes,s=a?this._safe_map:this._map;x.clamp();for(var m=[],p=0;p<u;p+=3)for(var _=o[p>>>2]>>>24-p%4*8&255,b=o[p+1>>>2]>>>24-(p+1)%4*8&255,d=o[p+2>>>2]>>>24-(p+2)%4*8&255,f=_<<16|b<<8|d,t=0;t<4&&p+t*.75<u;t++)m.push(s.charAt(f>>>6*(3-t)&63));var e=s.charAt(64);if(e)for(;m.length%4;)m.push(e);return m.join("")},parse:function(x,a=!0){var o=x.length,u=a?this._safe_map:this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var m=0;m<u.length;m++)s[u.charCodeAt(m)]=m}var p=u.charAt(64);if(p){var _=x.indexOf(p);_!==-1&&(o=_)}return c(x,o,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function c(x,a,o){for(var u=[],s=0,m=0;m<a;m++)if(m%4){var p=o[x.charCodeAt(m-1)]<<m%4*2,_=o[x.charCodeAt(m)]>>>6-m%4*2,b=p|_;u[s>>>2]|=b<<24-s%4*8,s++}return h.create(u,s)}}(),r.enc.Base64url})}(re)),w0}var E0={},ee={get exports(){return E0},set exports(n){E0=n}},Br;function o0(){return Br||(Br=1,function(n,y){(function(r,i){n.exports=i(N())})(W,function(r){return function(i){var l=r,h=l.lib,A=h.WordArray,c=h.Hasher,x=l.algo,a=[];(function(){for(var _=0;_<64;_++)a[_]=i.abs(i.sin(_+1))*4294967296|0})();var o=x.MD5=c.extend({_doReset:function(){this._hash=new A.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,b){for(var d=0;d<16;d++){var f=b+d,t=_[f];_[f]=(t<<8|t>>>24)&16711935|(t<<24|t>>>8)&4278255360}var e=this._hash.words,g=_[b+0],v=_[b+1],E=_[b+2],w=_[b+3],Q=_[b+4],B=_[b+5],C=_[b+6],D=_[b+7],M=_[b+8],G=_[b+9],z=_[b+10],I=_[b+11],P=_[b+12],k=_[b+13],T=_[b+14],U=_[b+15],R=e[0],S=e[1],H=e[2],F=e[3];R=u(R,S,H,F,g,7,a[0]),F=u(F,R,S,H,v,12,a[1]),H=u(H,F,R,S,E,17,a[2]),S=u(S,H,F,R,w,22,a[3]),R=u(R,S,H,F,Q,7,a[4]),F=u(F,R,S,H,B,12,a[5]),H=u(H,F,R,S,C,17,a[6]),S=u(S,H,F,R,D,22,a[7]),R=u(R,S,H,F,M,7,a[8]),F=u(F,R,S,H,G,12,a[9]),H=u(H,F,R,S,z,17,a[10]),S=u(S,H,F,R,I,22,a[11]),R=u(R,S,H,F,P,7,a[12]),F=u(F,R,S,H,k,12,a[13]),H=u(H,F,R,S,T,17,a[14]),S=u(S,H,F,R,U,22,a[15]),R=s(R,S,H,F,v,5,a[16]),F=s(F,R,S,H,C,9,a[17]),H=s(H,F,R,S,I,14,a[18]),S=s(S,H,F,R,g,20,a[19]),R=s(R,S,H,F,B,5,a[20]),F=s(F,R,S,H,z,9,a[21]),H=s(H,F,R,S,U,14,a[22]),S=s(S,H,F,R,Q,20,a[23]),R=s(R,S,H,F,G,5,a[24]),F=s(F,R,S,H,T,9,a[25]),H=s(H,F,R,S,w,14,a[26]),S=s(S,H,F,R,M,20,a[27]),R=s(R,S,H,F,k,5,a[28]),F=s(F,R,S,H,E,9,a[29]),H=s(H,F,R,S,D,14,a[30]),S=s(S,H,F,R,P,20,a[31]),R=m(R,S,H,F,B,4,a[32]),F=m(F,R,S,H,M,11,a[33]),H=m(H,F,R,S,I,16,a[34]),S=m(S,H,F,R,T,23,a[35]),R=m(R,S,H,F,v,4,a[36]),F=m(F,R,S,H,Q,11,a[37]),H=m(H,F,R,S,D,16,a[38]),S=m(S,H,F,R,z,23,a[39]),R=m(R,S,H,F,k,4,a[40]),F=m(F,R,S,H,g,11,a[41]),H=m(H,F,R,S,w,16,a[42]),S=m(S,H,F,R,C,23,a[43]),R=m(R,S,H,F,G,4,a[44]),F=m(F,R,S,H,P,11,a[45]),H=m(H,F,R,S,U,16,a[46]),S=m(S,H,F,R,E,23,a[47]),R=p(R,S,H,F,g,6,a[48]),F=p(F,R,S,H,D,10,a[49]),H=p(H,F,R,S,T,15,a[50]),S=p(S,H,F,R,B,21,a[51]),R=p(R,S,H,F,P,6,a[52]),F=p(F,R,S,H,w,10,a[53]),H=p(H,F,R,S,z,15,a[54]),S=p(S,H,F,R,v,21,a[55]),R=p(R,S,H,F,M,6,a[56]),F=p(F,R,S,H,U,10,a[57]),H=p(H,F,R,S,C,15,a[58]),S=p(S,H,F,R,k,21,a[59]),R=p(R,S,H,F,Q,6,a[60]),F=p(F,R,S,H,I,10,a[61]),H=p(H,F,R,S,E,15,a[62]),S=p(S,H,F,R,G,21,a[63]),e[0]=e[0]+R|0,e[1]=e[1]+S|0,e[2]=e[2]+H|0,e[3]=e[3]+F|0},_doFinalize:function(){var _=this._data,b=_.words,d=this._nDataBytes*8,f=_.sigBytes*8;b[f>>>5]|=128<<24-f%32;var t=i.floor(d/4294967296),e=d;b[(f+64>>>9<<4)+15]=(t<<8|t>>>24)&16711935|(t<<24|t>>>8)&4278255360,b[(f+64>>>9<<4)+14]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360,_.sigBytes=(b.length+1)*4,this._process();for(var g=this._hash,v=g.words,E=0;E<4;E++){var w=v[E];v[E]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}return g},clone:function(){var _=c.clone.call(this);return _._hash=this._hash.clone(),_}});function u(_,b,d,f,t,e,g){var v=_+(b&d|~b&f)+t+g;return(v<<e|v>>>32-e)+b}function s(_,b,d,f,t,e,g){var v=_+(b&f|d&~f)+t+g;return(v<<e|v>>>32-e)+b}function m(_,b,d,f,t,e,g){var v=_+(b^d^f)+t+g;return(v<<e|v>>>32-e)+b}function p(_,b,d,f,t,e,g){var v=_+(d^(b|~f))+t+g;return(v<<e|v>>>32-e)+b}l.MD5=c._createHelper(o),l.HmacMD5=c._createHmacHelper(o)}(Math),r.MD5})}(ee)),E0}var I0={},ne={get exports(){return I0},set exports(n){I0=n}},Cr;function xr(){return Cr||(Cr=1,function(n,y){(function(r,i){n.exports=i(N())})(W,function(r){return function(){var i=r,l=i.lib,h=l.WordArray,A=l.Hasher,c=i.algo,x=[],a=c.SHA1=A.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(o,u){for(var s=this._hash.words,m=s[0],p=s[1],_=s[2],b=s[3],d=s[4],f=0;f<80;f++){if(f<16)x[f]=o[u+f]|0;else{var t=x[f-3]^x[f-8]^x[f-14]^x[f-16];x[f]=t<<1|t>>>31}var e=(m<<5|m>>>27)+d+x[f];f<20?e+=(p&_|~p&b)+1518500249:f<40?e+=(p^_^b)+1859775393:f<60?e+=(p&_|p&b|_&b)-1894007588:e+=(p^_^b)-899497514,d=b,b=_,_=p<<30|p>>>2,p=m,m=e}s[0]=s[0]+m|0,s[1]=s[1]+p|0,s[2]=s[2]+_|0,s[3]=s[3]+b|0,s[4]=s[4]+d|0},_doFinalize:function(){var o=this._data,u=o.words,s=this._nDataBytes*8,m=o.sigBytes*8;return u[m>>>5]|=128<<24-m%32,u[(m+64>>>9<<4)+14]=Math.floor(s/4294967296),u[(m+64>>>9<<4)+15]=s,o.sigBytes=u.length*4,this._process(),this._hash},clone:function(){var o=A.clone.call(this);return o._hash=this._hash.clone(),o}});i.SHA1=A._createHelper(a),i.HmacSHA1=A._createHmacHelper(a)}(),r.SHA1})}(ne)),I0}var Q0={},ae={get exports(){return Q0},set exports(n){Q0=n}},wr;function Er(){return wr||(wr=1,function(n,y){(function(r,i){n.exports=i(N())})(W,function(r){return function(i){var l=r,h=l.lib,A=h.WordArray,c=h.Hasher,x=l.algo,a=[],o=[];(function(){function m(d){for(var f=i.sqrt(d),t=2;t<=f;t++)if(!(d%t))return!1;return!0}function p(d){return(d-(d|0))*4294967296|0}for(var _=2,b=0;b<64;)m(_)&&(b<8&&(a[b]=p(i.pow(_,1/2))),o[b]=p(i.pow(_,1/3)),b++),_++})();var u=[],s=x.SHA256=c.extend({_doReset:function(){this._hash=new A.init(a.slice(0))},_doProcessBlock:function(m,p){for(var _=this._hash.words,b=_[0],d=_[1],f=_[2],t=_[3],e=_[4],g=_[5],v=_[6],E=_[7],w=0;w<64;w++){if(w<16)u[w]=m[p+w]|0;else{var Q=u[w-15],B=(Q<<25|Q>>>7)^(Q<<14|Q>>>18)^Q>>>3,C=u[w-2],D=(C<<15|C>>>17)^(C<<13|C>>>19)^C>>>10;u[w]=B+u[w-7]+D+u[w-16]}var M=e&g^~e&v,G=b&d^b&f^d&f,z=(b<<30|b>>>2)^(b<<19|b>>>13)^(b<<10|b>>>22),I=(e<<26|e>>>6)^(e<<21|e>>>11)^(e<<7|e>>>25),P=E+I+M+o[w]+u[w],k=z+G;E=v,v=g,g=e,e=t+P|0,t=f,f=d,d=b,b=P+k|0}_[0]=_[0]+b|0,_[1]=_[1]+d|0,_[2]=_[2]+f|0,_[3]=_[3]+t|0,_[4]=_[4]+e|0,_[5]=_[5]+g|0,_[6]=_[6]+v|0,_[7]=_[7]+E|0},_doFinalize:function(){var m=this._data,p=m.words,_=this._nDataBytes*8,b=m.sigBytes*8;return p[b>>>5]|=128<<24-b%32,p[(b+64>>>9<<4)+14]=i.floor(_/4294967296),p[(b+64>>>9<<4)+15]=_,m.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var m=c.clone.call(this);return m._hash=this._hash.clone(),m}});l.SHA256=c._createHelper(s),l.HmacSHA256=c._createHmacHelper(s)}(Math),r.SHA256})}(ae)),Q0}var R0={},ie={get exports(){return R0},set exports(n){R0=n}},Ir;function oe(){return Ir||(Ir=1,function(n,y){(function(r,i,l){n.exports=i(N(),Er())})(W,function(r){return function(){var i=r,l=i.lib,h=l.WordArray,A=i.algo,c=A.SHA256,x=A.SHA224=c.extend({_doReset:function(){this._hash=new h.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var a=c._doFinalize.call(this);return a.sigBytes-=4,a}});i.SHA224=c._createHelper(x),i.HmacSHA224=c._createHmacHelper(x)}(),r.SHA224})}(ie)),R0}var M0={},se={get exports(){return M0},set exports(n){M0=n}},Qr;function Rr(){return Qr||(Qr=1,function(n,y){(function(r,i,l){n.exports=i(N(),b0())})(W,function(r){return function(){var i=r,l=i.lib,h=l.Hasher,A=i.x64,c=A.Word,x=A.WordArray,a=i.algo;function o(){return c.create.apply(c,arguments)}var u=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],s=[];(function(){for(var p=0;p<80;p++)s[p]=o()})();var m=a.SHA512=h.extend({_doReset:function(){this._hash=new x.init([new c.init(1779033703,4089235720),new c.init(3144134277,2227873595),new c.init(1013904242,4271175723),new c.init(2773480762,1595750129),new c.init(1359893119,2917565137),new c.init(2600822924,725511199),new c.init(528734635,4215389547),new c.init(1541459225,327033209)])},_doProcessBlock:function(p,_){for(var b=this._hash.words,d=b[0],f=b[1],t=b[2],e=b[3],g=b[4],v=b[5],E=b[6],w=b[7],Q=d.high,B=d.low,C=f.high,D=f.low,M=t.high,G=t.low,z=e.high,I=e.low,P=g.high,k=g.low,T=v.high,U=v.low,R=E.high,S=E.low,H=w.high,F=w.low,L=Q,O=B,j=C,q=D,x0=M,f0=G,vr=z,A0=I,V=P,K=k,or=T,l0=U,sr=R,v0=S,dr=H,d0=F,J=0;J<80;J++){var $,t0,fr=s[J];if(J<16)t0=fr.high=p[_+J*2]|0,$=fr.low=p[_+J*2+1]|0;else{var gt=s[J-15],c0=gt.high,p0=gt.low,Ln=(c0>>>1|p0<<31)^(c0>>>8|p0<<24)^c0>>>7,_t=(p0>>>1|c0<<31)^(p0>>>8|c0<<24)^(p0>>>7|c0<<25),mt=s[J-2],u0=mt.high,g0=mt.low,qn=(u0>>>19|g0<<13)^(u0<<3|g0>>>29)^u0>>>6,bt=(g0>>>19|u0<<13)^(g0<<3|u0>>>29)^(g0>>>6|u0<<26),yt=s[J-7],Wn=yt.high,Nn=yt.low,Bt=s[J-16],On=Bt.high,Ct=Bt.low;$=_t+Nn,t0=Ln+Wn+($>>>0<_t>>>0?1:0),$=$+bt,t0=t0+qn+($>>>0<bt>>>0?1:0),$=$+Ct,t0=t0+On+($>>>0<Ct>>>0?1:0),fr.high=t0,fr.low=$}var jn=V&or^~V&sr,wt=K&l0^~K&v0,Xn=L&j^L&x0^j&x0,Kn=O&q^O&f0^q&f0,Yn=(L>>>28|O<<4)^(L<<30|O>>>2)^(L<<25|O>>>7),Et=(O>>>28|L<<4)^(O<<30|L>>>2)^(O<<25|L>>>7),Zn=(V>>>14|K<<18)^(V>>>18|K<<14)^(V<<23|K>>>9),$n=(K>>>14|V<<18)^(K>>>18|V<<14)^(K<<23|V>>>9),It=u[J],Vn=It.high,Qt=It.low,Y=d0+$n,e0=dr+Zn+(Y>>>0<d0>>>0?1:0),Y=Y+wt,e0=e0+jn+(Y>>>0<wt>>>0?1:0),Y=Y+Qt,e0=e0+Vn+(Y>>>0<Qt>>>0?1:0),Y=Y+$,e0=e0+t0+(Y>>>0<$>>>0?1:0),Rt=Et+Kn,Jn=Yn+Xn+(Rt>>>0<Et>>>0?1:0);dr=sr,d0=v0,sr=or,v0=l0,or=V,l0=K,K=A0+Y|0,V=vr+e0+(K>>>0<A0>>>0?1:0)|0,vr=x0,A0=f0,x0=j,f0=q,j=L,q=O,O=Y+Rt|0,L=e0+Jn+(O>>>0<Y>>>0?1:0)|0}B=d.low=B+O,d.high=Q+L+(B>>>0<O>>>0?1:0),D=f.low=D+q,f.high=C+j+(D>>>0<q>>>0?1:0),G=t.low=G+f0,t.high=M+x0+(G>>>0<f0>>>0?1:0),I=e.low=I+A0,e.high=z+vr+(I>>>0<A0>>>0?1:0),k=g.low=k+K,g.high=P+V+(k>>>0<K>>>0?1:0),U=v.low=U+l0,v.high=T+or+(U>>>0<l0>>>0?1:0),S=E.low=S+v0,E.high=R+sr+(S>>>0<v0>>>0?1:0),F=w.low=F+d0,w.high=H+dr+(F>>>0<d0>>>0?1:0)},_doFinalize:function(){var p=this._data,_=p.words,b=this._nDataBytes*8,d=p.sigBytes*8;_[d>>>5]|=128<<24-d%32,_[(d+128>>>10<<5)+30]=Math.floor(b/4294967296),_[(d+128>>>10<<5)+31]=b,p.sigBytes=_.length*4,this._process();var f=this._hash.toX32();return f},clone:function(){var p=h.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});i.SHA512=h._createHelper(m),i.HmacSHA512=h._createHmacHelper(m)}(),r.SHA512})}(se)),M0}var S0={},fe={get exports(){return S0},set exports(n){S0=n}},Mr;function ce(){return Mr||(Mr=1,function(n,y){(function(r,i,l){n.exports=i(N(),b0(),Rr())})(W,function(r){return function(){var i=r,l=i.x64,h=l.Word,A=l.WordArray,c=i.algo,x=c.SHA512,a=c.SHA384=x.extend({_doReset:function(){this._hash=new A.init([new h.init(3418070365,3238371032),new h.init(1654270250,914150663),new h.init(2438529370,812702999),new h.init(355462360,4144912697),new h.init(1731405415,4290775857),new h.init(2394180231,1750603025),new h.init(3675008525,1694076839),new h.init(1203062813,3204075428)])},_doFinalize:function(){var o=x._doFinalize.call(this);return o.sigBytes-=16,o}});i.SHA384=x._createHelper(a),i.HmacSHA384=x._createHmacHelper(a)}(),r.SHA384})}(fe)),S0}var D0={},ue={get exports(){return D0},set exports(n){D0=n}},Sr;function he(){return Sr||(Sr=1,function(n,y){(function(r,i,l){n.exports=i(N(),b0())})(W,function(r){return function(i){var l=r,h=l.lib,A=h.WordArray,c=h.Hasher,x=l.x64,a=x.Word,o=l.algo,u=[],s=[],m=[];(function(){for(var b=1,d=0,f=0;f<24;f++){u[b+5*d]=(f+1)*(f+2)/2%64;var t=d%5,e=(2*b+3*d)%5;b=t,d=e}for(var b=0;b<5;b++)for(var d=0;d<5;d++)s[b+5*d]=d+(2*b+3*d)%5*5;for(var g=1,v=0;v<24;v++){for(var E=0,w=0,Q=0;Q<7;Q++){if(g&1){var B=(1<<Q)-1;B<32?w^=1<<B:E^=1<<B-32}g&128?g=g<<1^113:g<<=1}m[v]=a.create(E,w)}})();var p=[];(function(){for(var b=0;b<25;b++)p[b]=a.create()})();var _=o.SHA3=c.extend({cfg:c.cfg.extend({outputLength:512}),_doReset:function(){for(var b=this._state=[],d=0;d<25;d++)b[d]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(b,d){for(var f=this._state,t=this.blockSize/2,e=0;e<t;e++){var g=b[d+2*e],v=b[d+2*e+1];g=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,v=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360;var E=f[e];E.high^=v,E.low^=g}for(var w=0;w<24;w++){for(var Q=0;Q<5;Q++){for(var B=0,C=0,D=0;D<5;D++){var E=f[Q+5*D];B^=E.high,C^=E.low}var M=p[Q];M.high=B,M.low=C}for(var Q=0;Q<5;Q++)for(var G=p[(Q+4)%5],z=p[(Q+1)%5],I=z.high,P=z.low,B=G.high^(I<<1|P>>>31),C=G.low^(P<<1|I>>>31),D=0;D<5;D++){var E=f[Q+5*D];E.high^=B,E.low^=C}for(var k=1;k<25;k++){var B,C,E=f[k],T=E.high,U=E.low,R=u[k];R<32?(B=T<<R|U>>>32-R,C=U<<R|T>>>32-R):(B=U<<R-32|T>>>64-R,C=T<<R-32|U>>>64-R);var S=p[s[k]];S.high=B,S.low=C}var H=p[0],F=f[0];H.high=F.high,H.low=F.low;for(var Q=0;Q<5;Q++)for(var D=0;D<5;D++){var k=Q+5*D,E=f[k],L=p[k],O=p[(Q+1)%5+5*D],j=p[(Q+2)%5+5*D];E.high=L.high^~O.high&j.high,E.low=L.low^~O.low&j.low}var E=f[0],q=m[w];E.high^=q.high,E.low^=q.low}},_doFinalize:function(){var b=this._data,d=b.words;this._nDataBytes*8;var f=b.sigBytes*8,t=this.blockSize*32;d[f>>>5]|=1<<24-f%32,d[(i.ceil((f+1)/t)*t>>>5)-1]|=128,b.sigBytes=d.length*4,this._process();for(var e=this._state,g=this.cfg.outputLength/8,v=g/8,E=[],w=0;w<v;w++){var Q=e[w],B=Q.high,C=Q.low;B=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,E.push(C),E.push(B)}return new A.init(E,g)},clone:function(){for(var b=c.clone.call(this),d=b._state=this._state.slice(0),f=0;f<25;f++)d[f]=d[f].clone();return b}});l.SHA3=c._createHelper(_),l.HmacSHA3=c._createHmacHelper(_)}(Math),r.SHA3})}(ue)),D0}var H0={},xe={get exports(){return H0},set exports(n){H0=n}},Dr;function Ae(){return Dr||(Dr=1,function(n,y){(function(r,i){n.exports=i(N())})(W,function(r){/** @preserve
				(c) 2012 by Cédric Mesnil. All rights reserved.

				Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

				    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
				    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

				THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
				*/return function(i){var l=r,h=l.lib,A=h.WordArray,c=h.Hasher,x=l.algo,a=A.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),o=A.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=A.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),s=A.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=A.create([0,1518500249,1859775393,2400959708,2840853838]),p=A.create([1352829926,1548603684,1836072691,2053994217,0]),_=x.RIPEMD160=c.extend({_doReset:function(){this._hash=A.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(v,E){for(var w=0;w<16;w++){var Q=E+w,B=v[Q];v[Q]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}var C=this._hash.words,D=m.words,M=p.words,G=a.words,z=o.words,I=u.words,P=s.words,k,T,U,R,S,H,F,L,O,j;H=k=C[0],F=T=C[1],L=U=C[2],O=R=C[3],j=S=C[4];for(var q,w=0;w<80;w+=1)q=k+v[E+G[w]]|0,w<16?q+=b(T,U,R)+D[0]:w<32?q+=d(T,U,R)+D[1]:w<48?q+=f(T,U,R)+D[2]:w<64?q+=t(T,U,R)+D[3]:q+=e(T,U,R)+D[4],q=q|0,q=g(q,I[w]),q=q+S|0,k=S,S=R,R=g(U,10),U=T,T=q,q=H+v[E+z[w]]|0,w<16?q+=e(F,L,O)+M[0]:w<32?q+=t(F,L,O)+M[1]:w<48?q+=f(F,L,O)+M[2]:w<64?q+=d(F,L,O)+M[3]:q+=b(F,L,O)+M[4],q=q|0,q=g(q,P[w]),q=q+j|0,H=j,j=O,O=g(L,10),L=F,F=q;q=C[1]+U+O|0,C[1]=C[2]+R+j|0,C[2]=C[3]+S+H|0,C[3]=C[4]+k+F|0,C[4]=C[0]+T+L|0,C[0]=q},_doFinalize:function(){var v=this._data,E=v.words,w=this._nDataBytes*8,Q=v.sigBytes*8;E[Q>>>5]|=128<<24-Q%32,E[(Q+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,v.sigBytes=(E.length+1)*4,this._process();for(var B=this._hash,C=B.words,D=0;D<5;D++){var M=C[D];C[D]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}return B},clone:function(){var v=c.clone.call(this);return v._hash=this._hash.clone(),v}});function b(v,E,w){return v^E^w}function d(v,E,w){return v&E|~v&w}function f(v,E,w){return(v|~E)^w}function t(v,E,w){return v&w|E&~w}function e(v,E,w){return v^(E|~w)}function g(v,E){return v<<E|v>>>32-E}l.RIPEMD160=c._createHelper(_),l.HmacRIPEMD160=c._createHmacHelper(_)}(),r.RIPEMD160})}(xe)),H0}var k0={},le={get exports(){return k0},set exports(n){k0=n}},Hr;function Ar(){return Hr||(Hr=1,function(n,y){(function(r,i){n.exports=i(N())})(W,function(r){(function(){var i=r,l=i.lib,h=l.Base,A=i.enc,c=A.Utf8,x=i.algo;x.HMAC=h.extend({init:function(a,o){a=this._hasher=new a.init,typeof o=="string"&&(o=c.parse(o));var u=a.blockSize,s=u*4;o.sigBytes>s&&(o=a.finalize(o)),o.clamp();for(var m=this._oKey=o.clone(),p=this._iKey=o.clone(),_=m.words,b=p.words,d=0;d<u;d++)_[d]^=1549556828,b[d]^=909522486;m.sigBytes=p.sigBytes=s,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var o=this._hasher,u=o.finalize(a);o.reset();var s=o.finalize(this._oKey.clone().concat(u));return s}})})()})}(le)),k0}var F0={},ve={get exports(){return F0},set exports(n){F0=n}},kr;function de(){return kr||(kr=1,function(n,y){(function(r,i,l){n.exports=i(N(),xr(),Ar())})(W,function(r){return function(){var i=r,l=i.lib,h=l.Base,A=l.WordArray,c=i.algo,x=c.SHA1,a=c.HMAC,o=c.PBKDF2=h.extend({cfg:h.extend({keySize:128/32,hasher:x,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,s){for(var m=this.cfg,p=a.create(m.hasher,u),_=A.create(),b=A.create([1]),d=_.words,f=b.words,t=m.keySize,e=m.iterations;d.length<t;){var g=p.update(s).finalize(b);p.reset();for(var v=g.words,E=v.length,w=g,Q=1;Q<e;Q++){w=p.finalize(w),p.reset();for(var B=w.words,C=0;C<E;C++)v[C]^=B[C]}_.concat(g),f[0]++}return _.sigBytes=t*4,_}});i.PBKDF2=function(u,s,m){return o.create(m).compute(u,s)}}(),r.PBKDF2})}(ve)),F0}var U0={},pe={get exports(){return U0},set exports(n){U0=n}},Fr;function n0(){return Fr||(Fr=1,function(n,y){(function(r,i,l){n.exports=i(N(),xr(),Ar())})(W,function(r){return function(){var i=r,l=i.lib,h=l.Base,A=l.WordArray,c=i.algo,x=c.MD5,a=c.EvpKDF=h.extend({cfg:h.extend({keySize:128/32,hasher:x,iterations:1}),init:function(o){this.cfg=this.cfg.extend(o)},compute:function(o,u){for(var s,m=this.cfg,p=m.hasher.create(),_=A.create(),b=_.words,d=m.keySize,f=m.iterations;b.length<d;){s&&p.update(s),s=p.update(o).finalize(u),p.reset();for(var t=1;t<f;t++)s=p.finalize(s),p.reset();_.concat(s)}return _.sigBytes=d*4,_}});i.EvpKDF=function(o,u,s){return a.create(s).compute(o,u)}}(),r.EvpKDF})}(pe)),U0}var P0={},ge={get exports(){return P0},set exports(n){P0=n}},Ur;function X(){return Ur||(Ur=1,function(n,y){(function(r,i,l){n.exports=i(N(),n0())})(W,function(r){r.lib.Cipher||function(i){var l=r,h=l.lib,A=h.Base,c=h.WordArray,x=h.BufferedBlockAlgorithm,a=l.enc;a.Utf8;var o=a.Base64,u=l.algo,s=u.EvpKDF,m=h.Cipher=x.extend({cfg:A.extend(),createEncryptor:function(B,C){return this.create(this._ENC_XFORM_MODE,B,C)},createDecryptor:function(B,C){return this.create(this._DEC_XFORM_MODE,B,C)},init:function(B,C,D){this.cfg=this.cfg.extend(D),this._xformMode=B,this._key=C,this.reset()},reset:function(){x.reset.call(this),this._doReset()},process:function(B){return this._append(B),this._process()},finalize:function(B){B&&this._append(B);var C=this._doFinalize();return C},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function B(C){return typeof C=="string"?Q:v}return function(C){return{encrypt:function(D,M,G){return B(M).encrypt(C,D,M,G)},decrypt:function(D,M,G){return B(M).decrypt(C,D,M,G)}}}}()});h.StreamCipher=m.extend({_doFinalize:function(){var B=this._process(!0);return B},blockSize:1});var p=l.mode={},_=h.BlockCipherMode=A.extend({createEncryptor:function(B,C){return this.Encryptor.create(B,C)},createDecryptor:function(B,C){return this.Decryptor.create(B,C)},init:function(B,C){this._cipher=B,this._iv=C}}),b=p.CBC=function(){var B=_.extend();B.Encryptor=B.extend({processBlock:function(D,M){var G=this._cipher,z=G.blockSize;C.call(this,D,M,z),G.encryptBlock(D,M),this._prevBlock=D.slice(M,M+z)}}),B.Decryptor=B.extend({processBlock:function(D,M){var G=this._cipher,z=G.blockSize,I=D.slice(M,M+z);G.decryptBlock(D,M),C.call(this,D,M,z),this._prevBlock=I}});function C(D,M,G){var z,I=this._iv;I?(z=I,this._iv=i):z=this._prevBlock;for(var P=0;P<G;P++)D[M+P]^=z[P]}return B}(),d=l.pad={},f=d.Pkcs7={pad:function(B,C){for(var D=C*4,M=D-B.sigBytes%D,G=M<<24|M<<16|M<<8|M,z=[],I=0;I<M;I+=4)z.push(G);var P=c.create(z,M);B.concat(P)},unpad:function(B){var C=B.words[B.sigBytes-1>>>2]&255;B.sigBytes-=C}};h.BlockCipher=m.extend({cfg:m.cfg.extend({mode:b,padding:f}),reset:function(){var B;m.reset.call(this);var C=this.cfg,D=C.iv,M=C.mode;this._xformMode==this._ENC_XFORM_MODE?B=M.createEncryptor:(B=M.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==B?this._mode.init(this,D&&D.words):(this._mode=B.call(M,this,D&&D.words),this._mode.__creator=B)},_doProcessBlock:function(B,C){this._mode.processBlock(B,C)},_doFinalize:function(){var B,C=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(C.pad(this._data,this.blockSize),B=this._process(!0)):(B=this._process(!0),C.unpad(B)),B},blockSize:128/32});var t=h.CipherParams=A.extend({init:function(B){this.mixIn(B)},toString:function(B){return(B||this.formatter).stringify(this)}}),e=l.format={},g=e.OpenSSL={stringify:function(B){var C,D=B.ciphertext,M=B.salt;return M?C=c.create([1398893684,1701076831]).concat(M).concat(D):C=D,C.toString(o)},parse:function(B){var C,D=o.parse(B),M=D.words;return M[0]==1398893684&&M[1]==1701076831&&(C=c.create(M.slice(2,4)),M.splice(0,4),D.sigBytes-=16),t.create({ciphertext:D,salt:C})}},v=h.SerializableCipher=A.extend({cfg:A.extend({format:g}),encrypt:function(B,C,D,M){M=this.cfg.extend(M);var G=B.createEncryptor(D,M),z=G.finalize(C),I=G.cfg;return t.create({ciphertext:z,key:D,iv:I.iv,algorithm:B,mode:I.mode,padding:I.padding,blockSize:B.blockSize,formatter:M.format})},decrypt:function(B,C,D,M){M=this.cfg.extend(M),C=this._parse(C,M.format);var G=B.createDecryptor(D,M).finalize(C.ciphertext);return G},_parse:function(B,C){return typeof B=="string"?C.parse(B,this):B}}),E=l.kdf={},w=E.OpenSSL={execute:function(B,C,D,M){M||(M=c.random(64/8));var G=s.create({keySize:C+D}).compute(B,M),z=c.create(G.words.slice(C),D*4);return G.sigBytes=C*4,t.create({key:G,iv:z,salt:M})}},Q=h.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:w}),encrypt:function(B,C,D,M){M=this.cfg.extend(M);var G=M.kdf.execute(D,B.keySize,B.ivSize);M.iv=G.iv;var z=v.encrypt.call(this,B,C,G.key,M);return z.mixIn(G),z},decrypt:function(B,C,D,M){M=this.cfg.extend(M),C=this._parse(C,M.format);var G=M.kdf.execute(D,B.keySize,B.ivSize,C.salt);M.iv=G.iv;var z=v.decrypt.call(this,B,C,G.key,M);return z}})}()})}(ge)),P0}var T0={},_e={get exports(){return T0},set exports(n){T0=n}},Pr;function me(){return Pr||(Pr=1,function(n,y){(function(r,i,l){n.exports=i(N(),X())})(W,function(r){return r.mode.CFB=function(){var i=r.lib.BlockCipherMode.extend();i.Encryptor=i.extend({processBlock:function(h,A){var c=this._cipher,x=c.blockSize;l.call(this,h,A,x,c),this._prevBlock=h.slice(A,A+x)}}),i.Decryptor=i.extend({processBlock:function(h,A){var c=this._cipher,x=c.blockSize,a=h.slice(A,A+x);l.call(this,h,A,x,c),this._prevBlock=a}});function l(h,A,c,x){var a,o=this._iv;o?(a=o.slice(0),this._iv=void 0):a=this._prevBlock,x.encryptBlock(a,0);for(var u=0;u<c;u++)h[A+u]^=a[u]}return i}(),r.mode.CFB})}(_e)),T0}var z0={},be={get exports(){return z0},set exports(n){z0=n}},Tr;function ye(){return Tr||(Tr=1,function(n,y){(function(r,i,l){n.exports=i(N(),X())})(W,function(r){return r.mode.CTR=function(){var i=r.lib.BlockCipherMode.extend(),l=i.Encryptor=i.extend({processBlock:function(h,A){var c=this._cipher,x=c.blockSize,a=this._iv,o=this._counter;a&&(o=this._counter=a.slice(0),this._iv=void 0);var u=o.slice(0);c.encryptBlock(u,0),o[x-1]=o[x-1]+1|0;for(var s=0;s<x;s++)h[A+s]^=u[s]}});return i.Decryptor=l,i}(),r.mode.CTR})}(be)),z0}var G0={},Be={get exports(){return G0},set exports(n){G0=n}},zr;function Ce(){return zr||(zr=1,function(n,y){(function(r,i,l){n.exports=i(N(),X())})(W,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var i=r.lib.BlockCipherMode.extend();function l(c){if((c>>24&255)===255){var x=c>>16&255,a=c>>8&255,o=c&255;x===255?(x=0,a===255?(a=0,o===255?o=0:++o):++a):++x,c=0,c+=x<<16,c+=a<<8,c+=o}else c+=1<<24;return c}function h(c){return(c[0]=l(c[0]))===0&&(c[1]=l(c[1])),c}var A=i.Encryptor=i.extend({processBlock:function(c,x){var a=this._cipher,o=a.blockSize,u=this._iv,s=this._counter;u&&(s=this._counter=u.slice(0),this._iv=void 0),h(s);var m=s.slice(0);a.encryptBlock(m,0);for(var p=0;p<o;p++)c[x+p]^=m[p]}});return i.Decryptor=A,i}(),r.mode.CTRGladman})}(Be)),G0}var L0={},we={get exports(){return L0},set exports(n){L0=n}},Gr;function Ee(){return Gr||(Gr=1,function(n,y){(function(r,i,l){n.exports=i(N(),X())})(W,function(r){return r.mode.OFB=function(){var i=r.lib.BlockCipherMode.extend(),l=i.Encryptor=i.extend({processBlock:function(h,A){var c=this._cipher,x=c.blockSize,a=this._iv,o=this._keystream;a&&(o=this._keystream=a.slice(0),this._iv=void 0),c.encryptBlock(o,0);for(var u=0;u<x;u++)h[A+u]^=o[u]}});return i.Decryptor=l,i}(),r.mode.OFB})}(we)),L0}var q0={},Ie={get exports(){return q0},set exports(n){q0=n}},Lr;function Qe(){return Lr||(Lr=1,function(n,y){(function(r,i,l){n.exports=i(N(),X())})(W,function(r){return r.mode.ECB=function(){var i=r.lib.BlockCipherMode.extend();return i.Encryptor=i.extend({processBlock:function(l,h){this._cipher.encryptBlock(l,h)}}),i.Decryptor=i.extend({processBlock:function(l,h){this._cipher.decryptBlock(l,h)}}),i}(),r.mode.ECB})}(Ie)),q0}var W0={},Re={get exports(){return W0},set exports(n){W0=n}},qr;function Me(){return qr||(qr=1,function(n,y){(function(r,i,l){n.exports=i(N(),X())})(W,function(r){return r.pad.AnsiX923={pad:function(i,l){var h=i.sigBytes,A=l*4,c=A-h%A,x=h+c-1;i.clamp(),i.words[x>>>2]|=c<<24-x%4*8,i.sigBytes+=c},unpad:function(i){var l=i.words[i.sigBytes-1>>>2]&255;i.sigBytes-=l}},r.pad.Ansix923})}(Re)),W0}var N0={},Se={get exports(){return N0},set exports(n){N0=n}},Wr;function De(){return Wr||(Wr=1,function(n,y){(function(r,i,l){n.exports=i(N(),X())})(W,function(r){return r.pad.Iso10126={pad:function(i,l){var h=l*4,A=h-i.sigBytes%h;i.concat(r.lib.WordArray.random(A-1)).concat(r.lib.WordArray.create([A<<24],1))},unpad:function(i){var l=i.words[i.sigBytes-1>>>2]&255;i.sigBytes-=l}},r.pad.Iso10126})}(Se)),N0}var O0={},He={get exports(){return O0},set exports(n){O0=n}},Nr;function ke(){return Nr||(Nr=1,function(n,y){(function(r,i,l){n.exports=i(N(),X())})(W,function(r){return r.pad.Iso97971={pad:function(i,l){i.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(i,l)},unpad:function(i){r.pad.ZeroPadding.unpad(i),i.sigBytes--}},r.pad.Iso97971})}(He)),O0}var j0={},Fe={get exports(){return j0},set exports(n){j0=n}},Or;function Ue(){return Or||(Or=1,function(n,y){(function(r,i,l){n.exports=i(N(),X())})(W,function(r){return r.pad.ZeroPadding={pad:function(i,l){var h=l*4;i.clamp(),i.sigBytes+=h-(i.sigBytes%h||h)},unpad:function(i){for(var l=i.words,h=i.sigBytes-1,h=i.sigBytes-1;h>=0;h--)if(l[h>>>2]>>>24-h%4*8&255){i.sigBytes=h+1;break}}},r.pad.ZeroPadding})}(Fe)),j0}var X0={},Pe={get exports(){return X0},set exports(n){X0=n}},jr;function Te(){return jr||(jr=1,function(n,y){(function(r,i,l){n.exports=i(N(),X())})(W,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Pe)),X0}var K0={},ze={get exports(){return K0},set exports(n){K0=n}},Xr;function Ge(){return Xr||(Xr=1,function(n,y){(function(r,i,l){n.exports=i(N(),X())})(W,function(r){return function(i){var l=r,h=l.lib,A=h.CipherParams,c=l.enc,x=c.Hex,a=l.format;a.Hex={stringify:function(o){return o.ciphertext.toString(x)},parse:function(o){var u=x.parse(o);return A.create({ciphertext:u})}}}(),r.format.Hex})}(ze)),K0}var Y0={},Le={get exports(){return Y0},set exports(n){Y0=n}},Kr;function qe(){return Kr||(Kr=1,function(n,y){(function(r,i,l){n.exports=i(N(),i0(),o0(),n0(),X())})(W,function(r){return function(){var i=r,l=i.lib,h=l.BlockCipher,A=i.algo,c=[],x=[],a=[],o=[],u=[],s=[],m=[],p=[],_=[],b=[];(function(){for(var t=[],e=0;e<256;e++)e<128?t[e]=e<<1:t[e]=e<<1^283;for(var g=0,v=0,e=0;e<256;e++){var E=v^v<<1^v<<2^v<<3^v<<4;E=E>>>8^E&255^99,c[g]=E,x[E]=g;var w=t[g],Q=t[w],B=t[Q],C=t[E]*257^E*16843008;a[g]=C<<24|C>>>8,o[g]=C<<16|C>>>16,u[g]=C<<8|C>>>24,s[g]=C;var C=B*16843009^Q*65537^w*257^g*16843008;m[E]=C<<24|C>>>8,p[E]=C<<16|C>>>16,_[E]=C<<8|C>>>24,b[E]=C,g?(g=w^t[t[t[B^w]]],v^=t[t[v]]):g=v=1}})();var d=[0,1,2,4,8,16,32,64,128,27,54],f=A.AES=h.extend({_doReset:function(){var t;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var e=this._keyPriorReset=this._key,g=e.words,v=e.sigBytes/4,E=this._nRounds=v+6,w=(E+1)*4,Q=this._keySchedule=[],B=0;B<w;B++)B<v?Q[B]=g[B]:(t=Q[B-1],B%v?v>6&&B%v==4&&(t=c[t>>>24]<<24|c[t>>>16&255]<<16|c[t>>>8&255]<<8|c[t&255]):(t=t<<8|t>>>24,t=c[t>>>24]<<24|c[t>>>16&255]<<16|c[t>>>8&255]<<8|c[t&255],t^=d[B/v|0]<<24),Q[B]=Q[B-v]^t);for(var C=this._invKeySchedule=[],D=0;D<w;D++){var B=w-D;if(D%4)var t=Q[B];else var t=Q[B-4];D<4||B<=4?C[D]=t:C[D]=m[c[t>>>24]]^p[c[t>>>16&255]]^_[c[t>>>8&255]]^b[c[t&255]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,o,u,s,c)},decryptBlock:function(t,e){var g=t[e+1];t[e+1]=t[e+3],t[e+3]=g,this._doCryptBlock(t,e,this._invKeySchedule,m,p,_,b,x);var g=t[e+1];t[e+1]=t[e+3],t[e+3]=g},_doCryptBlock:function(t,e,g,v,E,w,Q,B){for(var C=this._nRounds,D=t[e]^g[0],M=t[e+1]^g[1],G=t[e+2]^g[2],z=t[e+3]^g[3],I=4,P=1;P<C;P++){var k=v[D>>>24]^E[M>>>16&255]^w[G>>>8&255]^Q[z&255]^g[I++],T=v[M>>>24]^E[G>>>16&255]^w[z>>>8&255]^Q[D&255]^g[I++],U=v[G>>>24]^E[z>>>16&255]^w[D>>>8&255]^Q[M&255]^g[I++],R=v[z>>>24]^E[D>>>16&255]^w[M>>>8&255]^Q[G&255]^g[I++];D=k,M=T,G=U,z=R}var k=(B[D>>>24]<<24|B[M>>>16&255]<<16|B[G>>>8&255]<<8|B[z&255])^g[I++],T=(B[M>>>24]<<24|B[G>>>16&255]<<16|B[z>>>8&255]<<8|B[D&255])^g[I++],U=(B[G>>>24]<<24|B[z>>>16&255]<<16|B[D>>>8&255]<<8|B[M&255])^g[I++],R=(B[z>>>24]<<24|B[D>>>16&255]<<16|B[M>>>8&255]<<8|B[G&255])^g[I++];t[e]=k,t[e+1]=T,t[e+2]=U,t[e+3]=R},keySize:256/32});i.AES=h._createHelper(f)}(),r.AES})}(Le)),Y0}var Z0={},We={get exports(){return Z0},set exports(n){Z0=n}},Yr;function Ne(){return Yr||(Yr=1,function(n,y){(function(r,i,l){n.exports=i(N(),i0(),o0(),n0(),X())})(W,function(r){return function(){var i=r,l=i.lib,h=l.WordArray,A=l.BlockCipher,c=i.algo,x=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],o=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],s=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=c.DES=A.extend({_doReset:function(){for(var d=this._key,f=d.words,t=[],e=0;e<56;e++){var g=x[e]-1;t[e]=f[g>>>5]>>>31-g%32&1}for(var v=this._subKeys=[],E=0;E<16;E++){for(var w=v[E]=[],Q=o[E],e=0;e<24;e++)w[e/6|0]|=t[(a[e]-1+Q)%28]<<31-e%6,w[4+(e/6|0)]|=t[28+(a[e+24]-1+Q)%28]<<31-e%6;w[0]=w[0]<<1|w[0]>>>31;for(var e=1;e<7;e++)w[e]=w[e]>>>(e-1)*4+3;w[7]=w[7]<<5|w[7]>>>27}for(var B=this._invSubKeys=[],e=0;e<16;e++)B[e]=v[15-e]},encryptBlock:function(d,f){this._doCryptBlock(d,f,this._subKeys)},decryptBlock:function(d,f){this._doCryptBlock(d,f,this._invSubKeys)},_doCryptBlock:function(d,f,t){this._lBlock=d[f],this._rBlock=d[f+1],p.call(this,4,252645135),p.call(this,16,65535),_.call(this,2,858993459),_.call(this,8,16711935),p.call(this,1,1431655765);for(var e=0;e<16;e++){for(var g=t[e],v=this._lBlock,E=this._rBlock,w=0,Q=0;Q<8;Q++)w|=u[Q][((E^g[Q])&s[Q])>>>0];this._lBlock=E,this._rBlock=v^w}var B=this._lBlock;this._lBlock=this._rBlock,this._rBlock=B,p.call(this,1,1431655765),_.call(this,8,16711935),_.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),d[f]=this._lBlock,d[f+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(d,f){var t=(this._lBlock>>>d^this._rBlock)&f;this._rBlock^=t,this._lBlock^=t<<d}function _(d,f){var t=(this._rBlock>>>d^this._lBlock)&f;this._lBlock^=t,this._rBlock^=t<<d}i.DES=A._createHelper(m);var b=c.TripleDES=A.extend({_doReset:function(){var d=this._key,f=d.words;if(f.length!==2&&f.length!==4&&f.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=f.slice(0,2),e=f.length<4?f.slice(0,2):f.slice(2,4),g=f.length<6?f.slice(0,2):f.slice(4,6);this._des1=m.createEncryptor(h.create(t)),this._des2=m.createEncryptor(h.create(e)),this._des3=m.createEncryptor(h.create(g))},encryptBlock:function(d,f){this._des1.encryptBlock(d,f),this._des2.decryptBlock(d,f),this._des3.encryptBlock(d,f)},decryptBlock:function(d,f){this._des3.decryptBlock(d,f),this._des2.encryptBlock(d,f),this._des1.decryptBlock(d,f)},keySize:192/32,ivSize:64/32,blockSize:64/32});i.TripleDES=A._createHelper(b)}(),r.TripleDES})}(We)),Z0}var $0={},Oe={get exports(){return $0},set exports(n){$0=n}},Zr;function je(){return Zr||(Zr=1,function(n,y){(function(r,i,l){n.exports=i(N(),i0(),o0(),n0(),X())})(W,function(r){return function(){var i=r,l=i.lib,h=l.StreamCipher,A=i.algo,c=A.RC4=h.extend({_doReset:function(){for(var o=this._key,u=o.words,s=o.sigBytes,m=this._S=[],p=0;p<256;p++)m[p]=p;for(var p=0,_=0;p<256;p++){var b=p%s,d=u[b>>>2]>>>24-b%4*8&255;_=(_+m[p]+d)%256;var f=m[p];m[p]=m[_],m[_]=f}this._i=this._j=0},_doProcessBlock:function(o,u){o[u]^=x.call(this)},keySize:256/32,ivSize:0});function x(){for(var o=this._S,u=this._i,s=this._j,m=0,p=0;p<4;p++){u=(u+1)%256,s=(s+o[u])%256;var _=o[u];o[u]=o[s],o[s]=_,m|=o[(o[u]+o[s])%256]<<24-p*8}return this._i=u,this._j=s,m}i.RC4=h._createHelper(c);var a=A.RC4Drop=c.extend({cfg:c.cfg.extend({drop:192}),_doReset:function(){c._doReset.call(this);for(var o=this.cfg.drop;o>0;o--)x.call(this)}});i.RC4Drop=h._createHelper(a)}(),r.RC4})}(Oe)),$0}var V0={},Xe={get exports(){return V0},set exports(n){V0=n}},$r;function Ke(){return $r||($r=1,function(n,y){(function(r,i,l){n.exports=i(N(),i0(),o0(),n0(),X())})(W,function(r){return function(){var i=r,l=i.lib,h=l.StreamCipher,A=i.algo,c=[],x=[],a=[],o=A.Rabbit=h.extend({_doReset:function(){for(var s=this._key.words,m=this.cfg.iv,p=0;p<4;p++)s[p]=(s[p]<<8|s[p]>>>24)&16711935|(s[p]<<24|s[p]>>>8)&4278255360;var _=this._X=[s[0],s[3]<<16|s[2]>>>16,s[1],s[0]<<16|s[3]>>>16,s[2],s[1]<<16|s[0]>>>16,s[3],s[2]<<16|s[1]>>>16],b=this._C=[s[2]<<16|s[2]>>>16,s[0]&4294901760|s[1]&65535,s[3]<<16|s[3]>>>16,s[1]&4294901760|s[2]&65535,s[0]<<16|s[0]>>>16,s[2]&4294901760|s[3]&65535,s[1]<<16|s[1]>>>16,s[3]&4294901760|s[0]&65535];this._b=0;for(var p=0;p<4;p++)u.call(this);for(var p=0;p<8;p++)b[p]^=_[p+4&7];if(m){var d=m.words,f=d[0],t=d[1],e=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,g=(t<<8|t>>>24)&16711935|(t<<24|t>>>8)&4278255360,v=e>>>16|g&4294901760,E=g<<16|e&65535;b[0]^=e,b[1]^=v,b[2]^=g,b[3]^=E,b[4]^=e,b[5]^=v,b[6]^=g,b[7]^=E;for(var p=0;p<4;p++)u.call(this)}},_doProcessBlock:function(s,m){var p=this._X;u.call(this),c[0]=p[0]^p[5]>>>16^p[3]<<16,c[1]=p[2]^p[7]>>>16^p[5]<<16,c[2]=p[4]^p[1]>>>16^p[7]<<16,c[3]=p[6]^p[3]>>>16^p[1]<<16;for(var _=0;_<4;_++)c[_]=(c[_]<<8|c[_]>>>24)&16711935|(c[_]<<24|c[_]>>>8)&4278255360,s[m+_]^=c[_]},blockSize:128/32,ivSize:64/32});function u(){for(var s=this._X,m=this._C,p=0;p<8;p++)x[p]=m[p];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<x[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<x[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<x[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<x[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<x[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<x[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<x[6]>>>0?1:0)|0,this._b=m[7]>>>0<x[7]>>>0?1:0;for(var p=0;p<8;p++){var _=s[p]+m[p],b=_&65535,d=_>>>16,f=((b*b>>>17)+b*d>>>15)+d*d,t=((_&4294901760)*_|0)+((_&65535)*_|0);a[p]=f^t}s[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,s[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,s[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,s[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,s[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,s[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,s[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,s[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}i.Rabbit=h._createHelper(o)}(),r.Rabbit})}(Xe)),V0}var J0={},Ye={get exports(){return J0},set exports(n){J0=n}},Vr;function Ze(){return Vr||(Vr=1,function(n,y){(function(r,i,l){n.exports=i(N(),i0(),o0(),n0(),X())})(W,function(r){return function(){var i=r,l=i.lib,h=l.StreamCipher,A=i.algo,c=[],x=[],a=[],o=A.RabbitLegacy=h.extend({_doReset:function(){var s=this._key.words,m=this.cfg.iv,p=this._X=[s[0],s[3]<<16|s[2]>>>16,s[1],s[0]<<16|s[3]>>>16,s[2],s[1]<<16|s[0]>>>16,s[3],s[2]<<16|s[1]>>>16],_=this._C=[s[2]<<16|s[2]>>>16,s[0]&4294901760|s[1]&65535,s[3]<<16|s[3]>>>16,s[1]&4294901760|s[2]&65535,s[0]<<16|s[0]>>>16,s[2]&4294901760|s[3]&65535,s[1]<<16|s[1]>>>16,s[3]&4294901760|s[0]&65535];this._b=0;for(var b=0;b<4;b++)u.call(this);for(var b=0;b<8;b++)_[b]^=p[b+4&7];if(m){var d=m.words,f=d[0],t=d[1],e=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,g=(t<<8|t>>>24)&16711935|(t<<24|t>>>8)&4278255360,v=e>>>16|g&4294901760,E=g<<16|e&65535;_[0]^=e,_[1]^=v,_[2]^=g,_[3]^=E,_[4]^=e,_[5]^=v,_[6]^=g,_[7]^=E;for(var b=0;b<4;b++)u.call(this)}},_doProcessBlock:function(s,m){var p=this._X;u.call(this),c[0]=p[0]^p[5]>>>16^p[3]<<16,c[1]=p[2]^p[7]>>>16^p[5]<<16,c[2]=p[4]^p[1]>>>16^p[7]<<16,c[3]=p[6]^p[3]>>>16^p[1]<<16;for(var _=0;_<4;_++)c[_]=(c[_]<<8|c[_]>>>24)&16711935|(c[_]<<24|c[_]>>>8)&4278255360,s[m+_]^=c[_]},blockSize:128/32,ivSize:64/32});function u(){for(var s=this._X,m=this._C,p=0;p<8;p++)x[p]=m[p];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<x[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<x[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<x[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<x[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<x[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<x[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<x[6]>>>0?1:0)|0,this._b=m[7]>>>0<x[7]>>>0?1:0;for(var p=0;p<8;p++){var _=s[p]+m[p],b=_&65535,d=_>>>16,f=((b*b>>>17)+b*d>>>15)+d*d,t=((_&4294901760)*_|0)+((_&65535)*_|0);a[p]=f^t}s[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,s[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,s[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,s[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,s[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,s[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,s[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,s[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}i.RabbitLegacy=h._createHelper(o)}(),r.RabbitLegacy})}(Ye)),J0}(function(n,y){(function(r,i,l){n.exports=i(N(),b0(),Zt(),Vt(),i0(),te(),o0(),xr(),Er(),oe(),Rr(),ce(),he(),Ae(),Ar(),de(),n0(),X(),me(),ye(),Ce(),Ee(),Qe(),Me(),De(),ke(),Ue(),Te(),Ge(),qe(),Ne(),je(),Ke(),Ze())})(W,function(r){return r})})(Wt);const $e={0:{0:"A",1:"C",2:"G",3:"T"},1:{0:"A",1:"G",2:"C",3:"T"},2:{0:"C",1:"A",2:"T",3:"G"},3:{0:"C",1:"T",2:"A",3:"G"},4:{0:"G",1:"A",2:"T",3:"C"},5:{0:"G",1:"T",2:"A",3:"C"},6:{0:"T",1:"C",2:"G",3:"A"},7:{0:"T",1:"G",2:"C",3:"A"}},Ve={0:{A:0,C:1,G:2,T:3},1:{A:0,G:1,C:2,T:3},2:{C:0,A:1,T:2,G:3},3:{C:0,T:1,A:2,G:3},4:{G:0,A:1,T:2,C:3},5:{G:0,T:1,A:2,C:3},6:{T:0,C:1,G:2,A:3},7:{T:0,G:1,C:2,A:3}},Je={A:{A:"A",T:"T",C:"C",G:"G"},T:{A:"T",T:"G",C:"A",G:"C"},C:{A:"C",T:"A",C:"G",G:"T"},G:{A:"G",T:"C",C:"T",G:"A"}},rn={A:{A:"A",T:"C",C:"T",G:"G"},T:{A:"T",T:"A",C:"G",G:"C"},C:{A:"C",T:"G",C:"A",G:"T"},G:{A:"G",T:"T",C:"C",G:"A"}},tn={A:{A:"A",T:"T",C:"C",G:"G"},T:{A:"T",T:"A",C:"G",G:"C"},C:{A:"C",T:"G",C:"A",G:"T"},G:{A:"G",T:"C",C:"T",G:"A"}},Z=(n,y)=>[rr(n>>6&3,y),rr(n>>4&3,y),rr(n>>2&3,y),rr(n>>0&3,y)],s0=(n,y)=>tr(n[0],y)<<6|tr(n[1],y)<<4|tr(n[2],y)<<2|tr(n[3],y)<<0,rr=(n,y)=>$e[y][n],tr=(n,y)=>Ve[y][n],Jr=(n,y)=>Je[n][y],rt=(n,y)=>rn[n][y],tt=(n,y)=>tn[n][y];var en=Object.freeze({__proto__:null,decrypt:({buffer:n,width:y,height:r,name:i},l)=>{const h=new Uint8ClampedArray(n),A=new Uint8ClampedArray(h.length),c={0:Jr,1:tt,2:rt},x=_=>3.999999999999999*_*(1-_),a=Array.from({length:4},(_,b)=>r0.PBKDF2(l,`key${b}`).toString()),o=Array.from({length:3},(_,b)=>r0.PBKDF2(l,`extraKey${b}`).toString());let u=a.map(_=>a0(_,!0)),s=o.map(_=>a0(_,!0));for(let _=0;_<1e3;_++)u=u.map(x),s=s.map(x);const m=Math.round(s[0]*7),p=[Z(Math.round(s[2]*255),Math.round(s[0]*7)),Z(Math.round(s[1]*255),Math.round(s[1]*7)),Z(Math.round(s[0]*255),Math.round(s[2]*7))];for(let _=0;_<r;_++)for(let b=0;b<y;b++){const d=(_*y+b)*4;u=u.map(x);const f=[Z(h[d],Math.round(u[0]*7)),Z(h[d+1],Math.round(u[1]*7)),Z(h[d+2],Math.round(u[2]*7))],t=c[2-Math.round(u[3]*2)];for(let e=0;e<p.length;e++){const g=p[e],v=f[e];p[e]=f[e],f[e]=g.map((E,w)=>t(v[w],E))}A[d]=s0(f[0],m),A[d+1]=s0(f[1],m),A[d+2]=s0(f[2],m),A[d+3]=h[d+3]}return{data:{name:i,buffer:A.buffer,width:y,height:r}}},encrypt:({buffer:n,width:y,height:r,name:i},l)=>{const h=new Uint8ClampedArray(n),A=new Uint8ClampedArray(h.length),c={0:Jr,1:tt,2:rt},x=_=>3.999999999999999*_*(1-_),a=Array.from({length:4},(_,b)=>r0.PBKDF2(l,`key${b}`).toString()),o=Array.from({length:3},(_,b)=>r0.PBKDF2(l,`extraKey${b}`).toString());let u=a.map(_=>a0(_,!0)),s=o.map(_=>a0(_,!0));for(let _=0;_<1e3;_++)u=u.map(x),s=s.map(x);const m=Math.round(s[0]*7),p=[Z(Math.round(s[2]*255),Math.round(s[0]*7)),Z(Math.round(s[1]*255),Math.round(s[1]*7)),Z(Math.round(s[0]*255),Math.round(s[2]*7))];for(let _=0;_<r;_++)for(let b=0;b<y;b++){const d=(_*y+b)*4;u=u.map(x);const f=[Z(h[d],m),Z(h[d+1],m),Z(h[d+2],m)],t=c[Math.round(u[3]*2)];for(let e=0;e<p.length;e++){const g=p[e],v=f[e];f[e]=g.map((E,w)=>t(v[w],E)),p[e]=f[e]}A[d]=s0(f[0],Math.round(u[0]*7)),A[d+1]=s0(f[1],Math.round(u[1]*7)),A[d+2]=s0(f[2],Math.round(u[2]*7)),A[d+3]=h[d+3]}return{data:{name:i,buffer:A.buffer,width:y,height:r}}}});const nn=(n,y,r)=>{const i=new OffscreenCanvas(n,y);i.addEventListener("webglcontextlost",function(h){console.log(h,111)});const l=i.getContext(r,{preserveDrawingBuffer:!0});if(!l)throw new Error("WebGL Context Create Error");return l},an=(n,y,r)=>{const i=n.createShader(y);if(!i)throw new Error("WebGL Shader Create Error");n.shaderSource(i,r),n.compileShader(i);const l=n.getShaderInfoLog(i);if(l&&l.length>0)throw l;return i},on=(n,y,...r)=>{for(const l of r)n.attachShader(y,l);n.linkProgram(y);const i=n.getProgramInfoLog(y);if(i&&i.length>0)throw i;for(const l of r)n.deleteShader(l);return y},sn=(n,y,r)=>{if(y.length!==r.length)throw new Error("shadersType length not equal shadersSource length");const i=[];for(let h=0;h<r.length;h++){const A=an(n,y[h],r[h]);i.push(A)}const l=n.createProgram();if(!l)throw new Error("WebGL Program Create Error");return on(n,l,...i)},fn=(n,y)=>{const{width:r,height:i,buffer:l}=y,h=new Uint8Array(l),A=n.createTexture();if(!A)throw new Error("WebGL Texture Create Error");return n.bindTexture(n.TEXTURE_2D,A),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r,i,0,n.RGBA,n.UNSIGNED_BYTE,h),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.generateMipmap(n.TEXTURE_2D),n.bindTexture(n.TEXTURE_2D,null),A},cn=(n,y,r,i)=>{const l=n.createBuffer();return n.bindBuffer(y,l),n.bufferData(y,r,i),n.bindBuffer(n.ARRAY_BUFFER,null),l},et=(n,y,r)=>{const i=`#version 300 es
    precision highp float;
    layout (location = 0) in vec2 a_position;
    out vec2 v_texcoord;
    void main() {
      gl_Position = vec4(a_position, 0, 1);
      v_texcoord = a_position * 0.5 + 0.5;// 将顶点坐标转换为纹理坐标, 方便纹理采样
    }
    `,{name:l,buffer:h,width:A,height:c}=n,x=new ArrayBuffer(h.byteLength),a=new Uint8Array(x),o=nn(A,c,"webgl2"),u=sn(o,[o.VERTEX_SHADER,o.FRAGMENT_SHADER],[i,y]);o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight);const s=cn(o,o.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),o.STATIC_DRAW),m=fn(o,n);return o.useProgram(u),o.bindBuffer(o.ARRAY_BUFFER,s),o.enableVertexAttribArray(0),o.vertexAttribPointer(0,2,o.FLOAT,!1,2*4,0),o.bindTexture(o.TEXTURE_2D,m),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,1),r==null||r(o,u),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.readPixels(0,0,A,c,o.RGBA,o.UNSIGNED_BYTE,a),o.bindTexture(o.TEXTURE_2D,null),o.bindBuffer(o.ARRAY_BUFFER,null),o.deleteProgram(u),{name:l,buffer:x,width:A,height:c}};var un=Object.freeze({__proto__:null,decrypt:(n,y)=>{const l=et(n,`#version 300 es
  precision highp float;
  uniform int u_iterations;
  uniform float u_size;
  uniform sampler2D u_texture;
  in vec2 v_texcoord;
  out vec4 outColor;
  void main() {
    // 将纹理坐标转换为像素坐标
    ivec2 pixelCoordinate = ivec2(v_texcoord * u_size);
    // 定义变换矩阵
    const mat2 transformMatrix = mat2(2.0, -1.0, -1.0, 1.0);
    for (int i = 0; i < u_iterations; i++) {
      // 将 pixelCoordinate 转换为 vec2 类型以进行矩阵乘法
      vec2 tempPixelCoordinate = vec2(pixelCoordinate);
      // 计算矩阵乘积
      tempPixelCoordinate = transformMatrix * tempPixelCoordinate;
      // 将结果转换回 ivec2 类型
      pixelCoordinate = ivec2(tempPixelCoordinate);
      // 为结果加上 int(u_size)
      pixelCoordinate = pixelCoordinate + int(u_size);
      // 对结果取模 u_size
      pixelCoordinate = pixelCoordinate % int(u_size);
    }
    outColor = texelFetch(u_texture, pixelCoordinate, 0);
  }
  `,(h,A)=>{const c=h.getUniformLocation(A,"u_iterations");h.uniform1i(c,Number(y));const x=h.getUniformLocation(A,"u_size");h.uniform1f(x,n.width)});return{data:Gt(l)}},encrypt:(n,y)=>{const r=zt(n);return{data:et(r,`#version 300 es
    precision mediump float;
    uniform int u_iteration;
    uniform float u_size;
    uniform sampler2D u_texture;
    in vec2 v_texcoord;
    out vec4 outColor;
    void main() {
      // 将纹理坐标转换为像素坐标
      ivec2 pixelCoordinate = ivec2(v_texcoord * u_size);
      // 定义变换矩阵
      const mat2 transformMatrix = mat2(1.0, 1.0, 1.0, 2.0);
      //迭代变换
      for (int i = 0; i < u_iteration; i++) {
        // 将 pixelCoordinate 转换为 vec2 类型以进行矩阵乘法
        vec2 tempPixelCoordinate = vec2(pixelCoordinate);
        // 计算矩阵乘积
        tempPixelCoordinate = transformMatrix * tempPixelCoordinate;
        // 将结果转换回 ivec2 类型
        pixelCoordinate = ivec2(tempPixelCoordinate);
        // 为结果加上 int(u_size)
        pixelCoordinate = pixelCoordinate + int(u_size);
        // 对结果取模 u_size
        pixelCoordinate = pixelCoordinate % int(u_size);
      }

     // 将获取到的颜色值设置为输出颜色
     outColor = texelFetch(u_texture, pixelCoordinate, 0);
    }
  `,(h,A)=>{const c=h.getUniformLocation(A,"u_iteration");h.uniform1i(c,Number(y));const x=h.getUniformLocation(A,"u_size");h.uniform1f(x,r.width)})}}});const nt=({buffer:n,width:y,height:r,name:i},l)=>{const h=new Uint8ClampedArray(n),A=new Uint8ClampedArray(h.length),c=o=>3.999999999999999*o*(1-o);let a=Array.from({length:4},(o,u)=>r0.PBKDF2(l,`key${u}`).toString()).map(o=>a0(o,!0));for(let o=0;o<1e3;o++)a=a.map(c);for(let o=0;o<r;o++)for(let u=0;u<y;u++){const s=(o*y+u)*4;a=a.map(c),a[0]=c(a[0]),A[s]=h[s]^Math.round(a[0]*255)^Math.round(a[1]*255),a[0]=c(a[0]),A[s+1]=h[s+1]^Math.round(a[0]*255)^Math.round(a[2]*255),a[0]=c(a[0]),A[s+2]=h[s+2]^Math.round(a[0]*255)^Math.round(a[3]*255),A[s+3]=h[s+3]}return{data:{name:i,buffer:A.buffer,width:y,height:r}}};var hn=Object.freeze({__proto__:null,decrypt:(n,y)=>nt(n,y),encrypt:nt});const at=({buffer:n,width:y,height:r,name:i},l)=>{const h=new Uint8ClampedArray(n),A=new Uint8ClampedArray(h.length),c=o=>{const u=1.999999999999999;return o<.5?o=u*o:o=u*(1-o),o};let a=Array.from({length:4},(o,u)=>r0.PBKDF2(l,`key${u}`).toString()).map(o=>a0(o,!0));for(let o=0;o<1e3;o++)a=a.map(c);for(let o=0;o<r;o++)for(let u=0;u<y;u++){const s=(o*y+u)*4;a=a.map(c),a[0]=c(a[0]),A[s]=h[s]^Math.round(a[0]*255)^Math.round(a[1]*255),a[0]=c(a[0]),A[s+1]=h[s+1]^Math.round(a[0]*255)^Math.round(a[2]*255),a[0]=c(a[0]),A[s+2]=h[s+2]^Math.round(a[0]*255)^Math.round(a[3]*255),A[s+3]=h[s+3]}return{data:{name:i,buffer:A.buffer,width:y,height:r}}};var xn=Object.freeze({__proto__:null,decrypt:(n,y)=>at(n,y),encrypt:at}),er=function(n){n==null&&(n=new Date().getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(n)};er.prototype.init_genrand=function(n){for(this.mt[0]=n>>>0,this.mti=1;this.mti<this.N;this.mti++){const y=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(((y&4294901760)>>>16)*1812433253<<16)+(y&65535)*1812433253+this.mti,this.mt[this.mti]>>>=0}},er.prototype.init_by_array=function(n,y){var r,i,l;for(this.init_genrand(19650218),r=1,i=0,l=this.N>y?this.N:y;l;l--){var h=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((h&4294901760)>>>16)*1664525<<16)+(h&65535)*1664525)+n[i]+i,this.mt[r]>>>=0,r++,i++,r>=this.N&&(this.mt[0]=this.mt[this.N-1],r=1),i>=y&&(i=0)}for(l=this.N-1;l;l--){const A=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((A&4294901760)>>>16)*1566083941<<16)+(A&65535)*1566083941)-r,this.mt[r]>>>=0,r++,r>=this.N&&(this.mt[0]=this.mt[this.N-1],r=1)}this.mt[0]=2147483648},er.prototype.genrand_int32=function(){var n,y=[0,this.MATRIX_A];if(this.mti>=this.N){var r;for(this.mti==this.N+1&&this.init_genrand(5489),r=0;r<this.N-this.M;r++)n=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+this.M]^n>>>1^y[n&1];for(;r<this.N-1;r++)n=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+(this.M-this.N)]^n>>>1^y[n&1];n=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^n>>>1^y[n&1],this.mti=0}return n=this.mt[this.mti++],n^=n>>>11,n^=n<<7&2636928640,n^=n<<15&4022730752,n^=n>>>18,n>>>0};function An(n){const y=[];let r=0;const i=n.length;let l,h,A;for(;r<i;)l=n[r],h=n[r+1],A=n[r+2],128>l?(y.push(String.fromCharCode(l)),r+=1):191<l&&l<224?(y.push(String.fromCharCode((l&31)<<6|h&63)),r+=2):(y.push(String.fromCharCode((l&15)<<12|(h&63)<<6|A&63)),r+=3);return y.join("")}function ln(n){const y=[];let r=0,i;n=encodeURI(n);const l=n.length;for(;r<l;)i=n[r],r+=1,i!=="%"?y.push(i.charCodeAt(0)):(i=n[r]+n[r+1],y.push(parseInt(i,16)),r+=2);return y}function it(n,y){const r=Array.from(Array(y).keys()),i=[];let l;const h=r0.SHA512(n).words.reduce(function(c,x){return c+Math.abs(x)},0),A=new er(h);for(let c=y;c>0;c--)l=A.genrand_int32()%c,i.push(r[l]),r[l]=r[c-1];return i}function vn(n,y){const r=ln(n),i=[],l=r.length;for(let h=0;h<l;h++)for(let A=128;A>0;A=Math.floor(A/2))if(Math.floor(r[h]/A)){for(let c=0;c<y;c++)i.push(1);r[h]-=A}else for(let c=0;c<y;c++)i.push(0);for(let h=0;h<24;h++)for(let A=0;A<y;A++)i.push(1);return i}function dn(n,y){function r(c){const x=c.length;let a=0;for(let o=0;o<x;o++)a+=c[o];return Math.round(a/x)}const i=[];let l,h;const A=Math.floor(Math.floor(n.length/y)/8);for(let c=0;c<A;c++){l=0,h=128;for(let x=0;x<8;x++)l+=r(n.slice((c*8+x)*y,(c*8+x+1)*y))*h,h=Math.floor(h/2);if(l==255)break;i.push(l)}return An(i)}function pn(n,y,r){const i=n.length;if(n.length>r)throw"Can not hold this many data!";const l=Array(r);for(let A=0;A<r;A++)l[A]=Math.floor(Math.random()*2);const h=it(y,r);for(let A=0;A<i;A++)l[h[A]]=n[A];return l}function gn(n,y){function r(A){return A%2==1?A-1:A}function i(A){return A%2==1?A:A+1}let l=0;const h=new Uint8ClampedArray(n.length);for(let A=0;A<h.length;A+=4)h[A]=y[l]?i(n[A]):r(n[A]),h[A+1]=y[l+1]?i(n[A+1]):r(n[A+1]),h[A+2]=y[l+2]?i(n[A+2]):r(n[A+2]),h[A+3]=n[A+3],l+=3;return h.buffer}function _n(n,y){const r=n.length,i=Array(r),l=it(y,r);for(let h=0;h<r;h++)i[h]=n[l[h]];return i}function mn(n){const y=[];for(let r=0;r<n.length;r+=4)y.push(n[r]%2==1?1:0),y.push(n[r+1]%2==1?1:0),y.push(n[r+2]%2==1?1:0);return y}function bn(n,y,r=1){const i=new Uint8ClampedArray(n.buffer),l=mn(i),h=_n(l,y);return dn(h,r)}const yn=(n,y,r,i=1)=>{const l=new Uint8ClampedArray(n.buffer);let h=n.buffer;const A=l.length/4*3;let c=vn(y,i);return c=pn(c,r,A),h=gn(l,c),{width:n.width,height:n.height,name:n.name,buffer:h}};var Bn=Object.freeze({__proto__:null,decrypt:(n,y)=>{const r=bn(n,y);return{data:n,payload:r}},encrypt:(n,y,{message:r})=>r!=null&&r.trim()?{data:yn(n,r,y),payload:r}:{data:n}}),nr=function(n){n==null&&(n=new Date().getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(n)};nr.prototype.init_genrand=function(n){for(this.mt[0]=n>>>0,this.mti=1;this.mti<this.N;this.mti++){const y=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(((y&4294901760)>>>16)*1812433253<<16)+(y&65535)*1812433253+this.mti,this.mt[this.mti]>>>=0}},nr.prototype.init_by_array=function(n,y){var r,i,l;for(this.init_genrand(19650218),r=1,i=0,l=this.N>y?this.N:y;l;l--){var h=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((h&4294901760)>>>16)*1664525<<16)+(h&65535)*1664525)+n[i]+i,this.mt[r]>>>=0,r++,i++,r>=this.N&&(this.mt[0]=this.mt[this.N-1],r=1),i>=y&&(i=0)}for(l=this.N-1;l;l--){const A=this.mt[r-1]^this.mt[r-1]>>>30;this.mt[r]=(this.mt[r]^(((A&4294901760)>>>16)*1566083941<<16)+(A&65535)*1566083941)-r,this.mt[r]>>>=0,r++,r>=this.N&&(this.mt[0]=this.mt[this.N-1],r=1)}this.mt[0]=2147483648},nr.prototype.genrand_int32=function(){var n,y=[0,this.MATRIX_A];if(this.mti>=this.N){var r;for(this.mti==this.N+1&&this.init_genrand(5489),r=0;r<this.N-this.M;r++)n=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+this.M]^n>>>1^y[n&1];for(;r<this.N-1;r++)n=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK,this.mt[r]=this.mt[r+(this.M-this.N)]^n>>>1^y[n&1];n=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^n>>>1^y[n&1],this.mti=0}return n=this.mt[this.mti++],n^=n>>>11,n^=n<<7&2636928640,n^=n<<15&4022730752,n^=n>>>18,n>>>0};function Cn(n){const y=[];let r=0;const i=n.length;let l,h,A;for(;r<i;)l=n[r],h=n[r+1],A=n[r+2],128>l?(y.push(String.fromCharCode(l)),r+=1):191<l&&l<224?(y.push(String.fromCharCode((l&31)<<6|h&63)),r+=2):(y.push(String.fromCharCode((l&15)<<12|(h&63)<<6|A&63)),r+=3);return y.join("")}function wn(n){const y=[];let r=0,i;n=encodeURI(n);const l=n.length;for(;r<l;)i=n[r],r+=1,i!=="%"?y.push(i.charCodeAt(0)):(i=n[r]+n[r+1],y.push(parseInt(i,16)),r+=2);return y}function ot(n,y){const r=Array.from(Array(y).keys()),i=[];let l;const h=r0.SHA512(n).words.reduce(function(c,x){return c+Math.abs(x)},0),A=new nr(h);for(let c=y;c>0;c--)l=A.genrand_int32()%c,i.push(r[l]),r[l]=r[c-1];return i}function En(n,y){const r=wn(n),i=[],l=r.length;for(let h=0;h<l;h++)for(let A=128;A>0;A=Math.floor(A/2))if(Math.floor(r[h]/A)){for(let c=0;c<y;c++)i.push(1);r[h]-=A}else for(let c=0;c<y;c++)i.push(0);for(let h=0;h<24;h++)for(let A=0;A<y;A++)i.push(1);return i}function In(n,y){function r(c){const x=c.length;let a=0;for(let o=0;o<x;o++)a+=c[o];return Math.round(a/x)}const i=[];let l,h;const A=Math.floor(Math.floor(n.length/y)/8);for(let c=0;c<A;c++){l=0,h=128;for(let x=0;x<8;x++)l+=r(n.slice((c*8+x)*y,(c*8+x+1)*y))*h,h=Math.floor(h/2);if(l==255)break;i.push(l)}return Cn(i)}function Qn(n,y,r){const i=n.length;if(n.length>r)throw"Can not hold this many data!";const l=Array(r);for(let A=0;A<r;A++)l[A]=Math.floor(Math.random()*2);const h=ot(y,r);for(let A=0;A<i;A++)l[h[A]]=n[A];return l}function st(n,y,r,i,l){const h=i?(Math.floor(y/8)*Math.floor(n/8)-1)*r.length:0,A=l?16:8,c=(Math.floor(y/A)*Math.floor(n/A)-1)*r.length;return[h,c]}function ft(n,y,r){return[.299*n+.587*y+.114*r,128-.168736*n-.331264*y+.5*r,128+.5*n-.418688*y-.081312*r]}function Rn(n,y,r){return[n+1.402*(r-128),n-.344136*(y-128)-.714136*(r-128),n+1.772*(y-128)]}function ar(n,y,r,i,l){const h=Array(y*y);for(let A=0;A<y;A++)for(let c=0;c<y;c++)h[A*y+c]=n[(r+A)*l+i+c];return h}function ir(n){const y=Array(64).fill(0);let r,i,l;for(let h=0;h<8;h++)for(let A=0;A<8;A++){r=h==0?1/Math.sqrt(2):1,i=A==0?1/Math.sqrt(2):1,l=0;for(let c=0;c<8;c++)for(let x=0;x<8;x++)l+=n[c*8+x]*Math.cos((2*c+1)*h*Math.PI/16)*Math.cos((2*x+1)*A*Math.PI/16);y[h*8+A]=1/4*r*i*l}return y}function ct(n){const y=Array(64).fill(0);let r,i,l;for(let h=0;h<8;h++)for(let A=0;A<8;A++){l=0;for(let c=0;c<8;c++)for(let x=0;x<8;x++)r=c==0?1/Math.sqrt(2):1,i=x==0?1/Math.sqrt(2):1,l+=r*i*n[c*8+x]*Math.cos((2*h+1)*c*Math.PI/16)*Math.cos((2*A+1)*x*Math.PI/16);y[h*8+A]=1/4*l}return y}function ut(n){const y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(let r=0;r<64;r++)y[r]*=n;return y}function ht(n,y,r,i){if(y.length!=i.length)throw"LOC and ENCODE_BITS have different sizes! This is a bug in code!";const l=ut(n),h=Array(64).fill(0);let A,c,x;for(let a=0;a<y.length;a++)A=r[y[a]]/l[y[a]],c=Math.floor(A),Math.abs(c%2)!=i[a]&&(c-=1),x=Math.ceil(A),Math.abs(x%2)!=i[a]&&(x+=1),A-c>x-A&&(c=x),h[y[a]]=c*l[y[a]]-r[y[a]];return h}function xt(n,y,r,i,l,h){for(let A=0;A<y;A++)for(let c=0;c<y;c++)n[(r+A)*l+i+c]=h[A*y+c]}function At(n,y,r,i,l,h){const A=Math.floor(r/8),c=Math.floor(y/8),x=h.length;if(x*(A*c-1)!=i.length)throw"Image size does not match data size (Y channel)";let a;for(let o=0;o<A;o++)for(let u=0;u<c;u++){let s=ar(n,8,o*8,u*8,y),m=ir(s);if(o==0&&u==0){a=m;continue}const p=m.map(function(b,d){return b-a[d]}),_=ht(l,h,p,i.slice(x*(o*c+u-1),x*(o*c+u)));m=m.map(function(b,d){return b+_[d]}),s=ct(m),xt(n,8,o*8,u*8,y,s)}}function lt(n){const y=Array(64);for(let r=0;r<8;r++)for(let i=0;i<8;i++)y[r*8+i]=(n[r*2*8+i*2]+n[(r*2+1)*8+i*2]+n[r*2*8+i*2+1]+n[(r*2+1)*8+i*2+1])/4;return y}function Mn(n){const y=Array(256);for(let r=0;r<16;r++)for(let i=0;i<16;i++)y[r*16+i]=n[Math.floor(r/2)*8+Math.floor(i/2)];return y}function Sn(n,y,r,i,l,h){const A=Math.floor(r/16),c=Math.floor(y/16),x=h.length;if(x*(A*c-1)!=i.length)throw"Image size does not match data size (CbCr channel)";let a;for(let o=0;o<A;o++)for(let u=0;u<c;u++){let s=ar(n,16,o*16,u*16,y);const m=lt(s);let p=ir(m);if(o==0&&u==0){a=p;continue}const _=p.map(function(t,e){return t-a[e]}),b=ht(l,h,_,i.slice(x*(o*c+u-1),x*(o*c+u)));p=p.map(function(t,e){return t+b[e]});let f=ct(p).map(function(t,e){return t-m[e]});f=Mn(f),s=s.map(function(t,e){return t+f[e]}),xt(n,16,o*16,u*16,y,s)}}function lr(n){let y=Math.round(n);return y=y>255?255:y,y<0?0:y}function Dn(n,y,r,i,l,h,A,c){const x=st(y,r,h,A,c),a=x[0],o=x[1],u=[],s=[],m=[],p=[];for(let f=0;f<n.length;f+=4){const t=ft(n[f],n[f+1],n[f+2]);u.push(t[0]),s.push(t[1]),m.push(t[2]),p.push(n[f+3])}A&&At(u,y,r,i.slice(0,a),l,h);const _=c?Sn:At;_(s,y,r,i.slice(a,a+o),l,h),_(m,y,r,i.slice(a+o,a+o+o),l,h);let b=0;const d=new Uint8ClampedArray(n.length);for(let f=0;f<n.length;f+=4){const t=Rn(u[b],s[b],m[b]);d[f]=lr(t[0]),d[f+1]=lr(t[1]),d[f+2]=lr(t[2]),d[f+3]=p[b],b+=1}return d}function Hn(n,y){const r=n.length,i=Array(r),l=ot(y,r);for(let h=0;h<r;h++)i[h]=n[l[h]];return i}function vt(n,y,r){const i=ut(n),l=[];for(let h=0;h<y.length;h++)l.push(Math.abs(Math.round(r[y[h]]/i[y[h]])%2));return l}function dt(n,y,r,i,l){const h=Math.floor(r/8),A=Math.floor(y/8),c=[];let x;for(let a=0;a<h;a++)for(let o=0;o<A;o++){const u=ar(n,8,a*8,o*8,y),s=ir(u);if(a==0&&o==0){x=s;continue}c.push(vt(i,l,s.map(function(m,p){return m-x[p]})))}return c.flat()}function kn(n,y,r,i,l){const h=Math.floor(r/16),A=Math.floor(y/16),c=[];let x;for(let a=0;a<h;a++)for(let o=0;o<A;o++){let u=ar(n,16,a*16,o*16,y);u=lt(u);const s=ir(u);if(a==0&&o==0){x=s;continue}c.push(vt(i,l,s.map(function(m,p){return m-x[p]})))}return c.flat()}function Fn(n,y,r,i,l,h,A){const c=[],x=[],a=[],o=[];for(let s=0;s<n.length;s+=4){const m=ft(n[s],n[s+1],n[s+2]);c.push(m[0]),x.push(m[1]),a.push(m[2])}h&&o.push(dt(c,y,r,i,l));const u=A?kn:dt;return o.push(u(x,y,r,i,l)),o.push(u(a,y,r,i,l)),o.flat()}function Un(n,y,r=23,i=2,l=[2,9,16],h=!0,A=!1){const c=new Uint8ClampedArray(n.buffer),x=Fn(c,n.width,n.height,i,l,h,A),a=Hn(x,y);return In(a,r)}const Pn=(n,y,r,i=23,l=2,h=[2,9,16],A=!0,c=!1)=>{const x=new Uint8ClampedArray(n.buffer);let a=n.buffer,o=x.length/4*3;const u=st(n.width,n.height,h,A,c);o=u[0]+2*u[1];let s=En(y,i);return s=Qn(s,r,o),a=Dn(x,n.width,n.height,s,l,h,A,c),{width:n.width,height:n.height,name:n.name,buffer:a}};var Tn=Object.freeze({__proto__:null,decrypt:(n,y,{repeat:r})=>{const i=Un(n,y,r);return{data:n,payload:i}},encrypt:(n,y,{message:r,repeat:i})=>r!=null&&r.trim()?{data:Pn(n,r,y,i),payload:r}:{data:n}});const zn={encry_dna:en,encry_arnold:un,encry_logistic:hn,encry_tent:xn,stega_lsb:Bn,stega_dct:Tn};let pt=null;const Gn=async(n,y,r,i={})=>{const l=await Ut(n.file),{format:h,quality:A,...c}=i,x=pt[r];if(typeof x!="function")throw new Error("未找到对应的处理函数: "+r);const a=await x(l,y,c),o=await Pt(a.data,h,A),u=await qt(o,null,!1,!0),s=a.payload;return{data:u,payload:s}};self.addEventListener("message",async n=>{const{args:y,module:r}=n.data;if(r)try{pt=zn[r]}catch(i){console.error("获取模块失败: ",i)}else if(y)try{const i=await Gn(...y);self.postMessage(i)}catch(i){console.error("图像处理失败: ",i),self.postMessage(null)}})})();
