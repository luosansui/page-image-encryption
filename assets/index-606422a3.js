import{c as l}from"./index-d36b6913.js";import{e as d}from"./zip-3b3435a7.js";import"./index-d483e458.js";const i=({buffer:m,width:o,height:u,name:c},f)=>{const a=new Uint8ClampedArray(m),s=new Uint8ClampedArray(a.length),p=r=>{const e=1.999999999999999;return r<.5?r=e*r:r=e*(1-r),r};let t=Array.from({length:4},(r,e)=>l.PBKDF2(f,`key${e}`).toString()).map(r=>d(r,!0));for(let r=0;r<1e3;r++)t=t.map(p);for(let r=0;r<u;r++)for(let e=0;e<o;e++){const n=(r*o+e)*4;t=t.map(p),t[0]=p(t[0]),s[n]=a[n]^Math.round(t[0]*255)^Math.round(t[1]*255),t[0]=p(t[0]),s[n+1]=a[n+1]^Math.round(t[0]*255)^Math.round(t[2]*255),t[0]=p(t[0]),s[n+2]=a[n+2]^Math.round(t[0]*255)^Math.round(t[3]*255),s[n+3]=a[n+3]}return{data:{name:c,buffer:s.buffer,width:o,height:u}}},A=(m,o)=>i(m,o);export{A as decrypt,i as encrypt};
